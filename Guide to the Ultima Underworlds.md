# Guide to the Ultima Underworlds

- [Guide to the Ultima Underworlds](#guide-to-the-ultima-underworlds)
  - [Introduction](#introduction)
    - [Sources](#sources)
      - [Also referenced](#also-referenced)
      - [Credits](#credits)
        - [Credits from the Abysmal Project](#credits-from-the-abysmal-project)
        - [Credits from the Underworld Adventures Project](#credits-from-the-underworld-adventures-project)
        - [Other contributions to this document](#other-contributions-to-this-document)
  - [Terminology and Conventions](#terminology-and-conventions)
  - [Differences Between ``UW1`` and ``UW2``](#differences-between-uw1-and-uw2)
    - [The Worlds and Level Concept](#the-worlds-and-level-concept)
  - [Common Elements between ``UW1`` and ``UW2``](#common-elements-between-uw1-and-uw2)
  - [File Formats](#file-formats)
    - [File List](#file-list)
    - [Tilemap and Object List](#tilemap-and-object-list)
    - [Player Data](#player-data)
      - [Player Data Overview](#player-data-overview)
      - [``UW1`` ``Player.Dat``](#uw1-playerdat)
        - [Decoding and Encoding ``UW1`` *Player.Dat*](#decoding-and-encoding-uw1-playerdat)
        - [``UW1`` ``Player.Dat`` format](#uw1-playerdat-format)
      - [``UW2`` ``Player.Dat``](#uw2-playerdat)
        - [Decoding and Encoding ``UW2`` *Player.Dat*](#decoding-and-encoding-uw2-playerdat)
        - [``UW2`` *Player.Dat* format](#uw2-playerdat-format)
    - [Object data ``objects.dat``](#object-data-objectsdat)
      - [Melee Weapons Table](#melee-weapons-table)
      - [Ranged Weapons Table](#ranged-weapons-table)
      - [Armour and Wearables Table](#armour-and-wearables-table)
      - [Critters Table](#critters-table)
        - [Loot sub table](#loot-sub-table)
      - [Containers table](#containers-table)
      - [Light Sources table](#light-sources-table)
      - [Food Nutrition table](#food-nutrition-table)
      - [Trigger Type Table](#trigger-type-table)
      - [Animation Object Table](#animation-object-table)
    - [Object Combining ``cmb.dat``](#object-combining-cmbdat)
      - [Common Object Data ``comobj.dat``](#common-object-data-comobjdat)
    - [Graphic Formats](#graphic-formats)
      - [Textures](#textures)
      - [Sprites](#sprites)
      - [Bitmaps](#bitmaps)
      - [3D Models](#3d-models)
      - [Cutscenes](#cutscenes)
    - [Dungeon Light Levels](#dungeon-light-levels)
      - [Light.dat and Mono.dat](#lightdat-and-monodat)
      - [Shades.dat](#shadesdat)
      - [Dl.dat](#dldat)
    - [Chrgen.dat](#chrgendat)
    - [Scheduled Events (*SCD.ARK*)](#scheduled-events-scdark)
  - [Game Mechanics](#game-mechanics)
    - [RNG](#rng)
    - [Leveling Up and Experience Points](#leveling-up-and-experience-points)
    - [Attributes](#attributes)
      - [Strength](#strength)
      - [Intelligence](#intelligence)
      - [Dexterity](#dexterity)
      - [Cheat Detection](#cheat-detection)
    - [Skills](#skills)
      - [Skill Checks](#skill-checks)
      - [Specific Skills](#specific-skills)
        - [Attack](#attack)
        - [Defence](#defence)
        - [Unarmed](#unarmed)
        - [Sword, Axe and Mace](#sword-axe-and-mace)
        - [Missile](#missile)
        - [Mana](#mana)
        - [Lore](#lore)
        - [Casting](#casting)
        - [Traps](#traps)
        - [Search](#search)
        - [Track](#track)
          - [Fishing Skill Check](#fishing-skill-check)
      - [Sneak](#sneak)
      - [Repair](#repair)
      - [Charm](#charm)
      - [Lockpick](#lockpick)
      - [Acrobat](#acrobat)
      - [Appraise](#appraise)
      - [Swimming](#swimming)
    - [Combat Mechanics](#combat-mechanics)
      - [Attack types](#attack-types)
      - [Swing Charge](#swing-charge)
      - [Attack To Hit Calculations](#attack-to-hit-calculations)
      - [Combat Damage Calculations](#combat-damage-calculations)
      - [Equipment Damage Calculations](#equipment-damage-calculations)
      - [UW2 Accuracy/Damage Enchantment Bug](#uw2-accuracydamage-enchantment-bug)
      - [Missile Combat](#missile-combat)
    - [Magic](#magic)
      - [Spell classes](#spell-classes)
      - [Runic Magic](#runic-magic)
      - [Non-runic spells](#non-runic-spells)
        - [Class 0 Spells Light](#class-0-spells-light)
        - [Class 1 Spells Motion](#class-1-spells-motion)
          - [Class 1 Subclass 1 Leap](#class-1-subclass-1-leap)
          - [Class 1 Subclass 2 Slowfall](#class-1-subclass-2-slowfall)
          - [Class 1 Subclass 3 Levitation and Subclass 5 Flying](#class-1-subclass-3-levitation-and-subclass-5-flying)
          - [Class 1 Subclass 4 Water walk](#class-1-subclass-4-water-walk)
          - [Class 1 Subclass 6 Bouncing](#class-1-subclass-6-bouncing)
        - [Class 2 Damage Resistance](#class-2-damage-resistance)
        - [Class 3 Status Effects.](#class-3-status-effects)
        - [Class 4 Healing Spells](#class-4-healing-spells)
        - [Class 5 Projectiles](#class-5-projectiles)
        - [Class 6 Area Effects](#class-6-area-effects)
        - [Class 7 Targetted Spells](#class-7-targetted-spells)
        - [Class 8 Spells Summoning](#class-8-spells-summoning)
        - [Class A Mana Restore](#class-a-mana-restore)
        - [Class B Misc Spells](#class-b-misc-spells)
        - [Class D Misc Spells](#class-d-misc-spells)
          - [Class D Subclass 0  Altaras Wand Spell](#class-d-subclass-0--altaras-wand-spell)
          - [Class D Subclass 3,4,5 Basilisk Oil](#class-d-subclass-345-basilisk-oil)
          - [Class D Subclass 7 Map Area](#class-d-subclass-7-map-area)
        - [Class D Subclass 8 Acid Spit](#class-d-subclass-8-acid-spit)
        - [Class E Spells Cutscenes](#class-e-spells-cutscenes)
      - [Runic Spells](#runic-spells)
      - [Enchanted Items](#enchanted-items)
    - [Survival Mechanics](#survival-mechanics)
      - [Sleeping](#sleeping)
      - [Food](#food)
      - [Death and Resurrection](#death-and-resurrection)
      - [Intoxication](#intoxication)
    - [Game Clock and Time](#game-clock-and-time)
  - [Objects](#objects)
    - [General Object Overview](#general-object-overview)
      - [Door Spike](#door-spike)
    - [Special Objects](#special-objects)
      - [Guardian Signet Ring](#guardian-signet-ring)
      - [Data Storage Crystal](#data-storage-crystal)
      - [Turbo Lotus Esprit](#turbo-lotus-esprit)
    - [Traps \& Triggers](#traps--triggers)
      - [Traps](#traps-1)
        - [a\_arrow trap](#a_arrow-trap)
        - [a\_bridge trap](#a_bridge-trap)
        - [a\_change from trap](#a_change-from-trap)
        - [a\_change to trap](#a_change-to-trap)
        - [a\_change terrain trap](#a_change-terrain-trap)
        - [a\_check variable trap](#a_check-variable-trap)
        - [a\_combination trap](#a_combination-trap)
        - [a\_create object trap](#a_create-object-trap)
        - [a\_damage trap](#a_damage-trap)
        - [a\_delete object trap](#a_delete-object-trap)
        - [a\_do trap or a\_hack\_trap](#a_do-trap-or-a_hack_trap)
          - [Camera Trap](#camera-trap)
          - [Platform Trap](#platform-trap)
          - [Trespass Trap](#trespass-trap)
          - [Class Object Trap](#class-object-trap)
          - [Fraznium Forcefield](#fraznium-forcefield)
          - [Unused Oscillating Trap](#unused-oscillating-trap)
          - [Colour Cycling Trap](#colour-cycling-trap)
          - [Ice Floor Collapse Trap](#ice-floor-collapse-trap)
          - [Switch Puzzle Reset Trap](#switch-puzzle-reset-trap)
          - [Platform Puzzle Reset Trap](#platform-puzzle-reset-trap)
          - [Rising Platforms Trap](#rising-platforms-trap)
          - [Loth Tomb Switches](#loth-tomb-switches)
          - [TMAP Change Trap](#tmap-change-trap)
          - [Bullfrog Trap](#bullfrog-trap)
          - [Change Graffiti Trap](#change-graffiti-trap)
        - [Bullfrog Puzzle Traps](#bullfrog-puzzle-traps)
          - [Bly Skup Chamber Trap](#bly-skup-chamber-trap)
          - [Scintillus Force Field Trap](#scintillus-force-field-trap)
          - [Change Object Quality Trap](#change-object-quality-trap)
          - [Change TMAP Trap](#change-tmap-trap)
          - [Random Button Flicking Trap](#random-button-flicking-trap)
          - [Avatar is a Coward Trap](#avatar-is-a-coward-trap)
          - [Arena of Fire Safety Trap](#arena-of-fire-safety-trap)
          - [QBert Puzzle Trap.](#qbert-puzzle-trap)
          - [Bottle Recycler Trap](#bottle-recycler-trap)
          - [The Castle Goes Dry Trap](#the-castle-goes-dry-trap)
          - [Light Sphere Recharge Trap](#light-sphere-recharge-trap)
          - [Britannia NPC Teleport](#britannia-npc-teleport)
          - [Unknown Trap 37](#unknown-trap-37)
          - [Spoil Healing Potion Trap](#spoil-healing-potion-trap)
          - [Change Visibility Trap](#change-visibility-trap)
          - [Vending Machine Selection Trap](#vending-machine-selection-trap)
          - [Emerald Puzzle Trap](#emerald-puzzle-trap)
          - [Vending Machine Spawning Trap](#vending-machine-spawning-trap)
          - [Vending Machine Sign Trap](#vending-machine-sign-trap)
          - [A Talking Door!](#a-talking-door)
          - [Change NPC Goal Trap](#change-npc-goal-trap)
          - [Sleep Trap](#sleep-trap)
          - [Unknown Automap Trap](#unknown-automap-trap)
          - [Start Conversation Trap](#start-conversation-trap)
          - [Gem Face Rotate](#gem-face-rotate)
          - [World Teleport Trap](#world-teleport-trap)
          - [Unknown AI Goal Trap 62](#unknown-ai-goal-trap-62)
          - [End Game Trap](#end-game-trap)
        - [a\_door trap](#a_door-trap)
        - [a\_flam rune](#a_flam-rune)
        - [a\_jump trap](#a_jump-trap)
        - [a\_null trap](#a_null-trap)
        - [a\_pit trap](#a_pit-trap)
        - [a\_proximity trap](#a_proximity-trap)
        - [a\_set variable trap](#a_set-variable-trap)
        - [a\_skill trap](#a_skill-trap)
        - [a\_special effects trap](#a_special-effects-trap)
        - [a\_spelltrap](#a_spelltrap)
        - [a\_teleport trap](#a_teleport-trap)
        - [a\_text string trap](#a_text-string-trap)
        - [a\_tym rune](#a_tym-rune)
        - [a\_ward trap or a\_tell trap](#a_ward-trap-or-a_tell-trap)
        - [an\_experience trap](#an_experience-trap)
        - [an\_inventory trap](#an_inventory-trap)
        - [an\_oscillator trap](#an_oscillator-trap)
      - [Triggers](#triggers)
        - [a\_close trigger](#a_close-trigger)
        - [a\_look trigger](#a_look-trigger)
        - [a\_move trigger](#a_move-trigger)
        - [a\_pick up trigger](#a_pick-up-trigger)
        - [a\_pressure release trigger](#a_pressure-release-trigger)
        - [a\_pressure trigger](#a_pressure-trigger)
        - [a\_scheduled trigger](#a_scheduled-trigger)
        - [a\_step on trigger](#a_step-on-trigger)
        - [a\_timer trigger](#a_timer-trigger)
        - [a\_use trigger](#a_use-trigger)
        - [an\_enter trigger](#an_enter-trigger)
        - [an\_exit trigger](#an_exit-trigger)
        - [an\_open trigger](#an_open-trigger)
        - [an\_unlock trigger](#an_unlock-trigger)
        - [a\_step on trigger](#a_step-on-trigger-1)
  - [Quests](#quests)
    - [``UW1`` Quests](#uw1-quests)
    - [``UW2`` Quests](#uw2-quests)
      - [The X Clock](#the-x-clock)
  - [Game worlds and Levels](#game-worlds-and-levels)
    - [``UW1`` Levels](#uw1-levels)
      - [``Tybal's Lair``](#tybals-lair)
      - [The ``Ethereal Void`` Endgame Map](#the-ethereal-void-endgame-map)
    - [``UW2`` Levels](#uw2-levels)
      - [``Britannia``](#britannia)
      - [``Pits Of Carnage``](#pits-of-carnage)
      - [The ``Ethereal Void``](#the-ethereal-void)
        - [QBert Puzzle.](#qbert-puzzle)
  - [NPCS](#npcs)
    - [NPC Basics](#npc-basics)
    - [AI Goals and Goal Targets](#ai-goals-and-goal-targets)
    - [Special Death Cases](#special-death-cases)
    - [``UW2`` Castle Schedule](#uw2-castle-schedule)
  - [Strings](#strings)
    - [Decoding](#decoding)
    - [String Blocks](#string-blocks)
  - [Conversations](#conversations)
    - [Conversation Machine Code Specification](#conversation-machine-code-specification)
    - [Imported Functions](#imported-functions)
    - [Conversation Variables](#conversation-variables)
  - [Unanswered Questions and Problems](#unanswered-questions-and-problems)
  - [Code Examples](#code-examples)
  - [Reverse Engineering](#reverse-engineering)
  - [Trivia](#trivia)


## Introduction
This document is a collection of documentation about the file formats and game mechanics for the Ultima Underworld (UW) series of games. 

### Sources
The information in this document is gathered from a number of sources most notably the vernable uw-formats.txt. Sections of this document if not taken directly from UW-Formats.txt are heavily based on the work that has gone into that document by a number of contributors and groups over the years. Every effort is being made to list this contributions here. To avoid missing anyone I am quoting verbatim the credit section of each copy of uw-formats.txt I can referencing.

Unfortunately some information sources have been lost to me over time. If I have missed a reference or not given due credit for research or code examples then please let me know and I will happily correct the record.

#### Also referenced

Unknown authors [Internal Formats on the Ultima Codex](https://wiki.ultimacodex.com/wiki/Ultima_Underworld_internal_formats) 

Mitch Aigner FAQs for [UW1](https://gamefaqs.gamespot.com/pc/562665-ultima-underworld-the-stygian-abyss/faqs/1811) abd [UW2](https://gamefaqs.gamespot.com/pc/564592-ultima-underworld-ii-labyrinth-of-worlds/faqs/1813)

#### Credits
The following credits are taken verbatim from the files shared by named projects.

The "me" mentioned in the credits is not the author of this guide.

##### Credits from the Abysmal Project
   My thanks go out to Jim Cameron that started the original "uw-specs.txt"
   file and subsequently found out more unknown data structures and discussed
   about file formats with me. Many thanks, Jim!

   Additional information came from
   Alistair Brown (basic object format, via the Underworld II editor available at
   <http://bearcity.pwp.blueyonder.co.uk/>)
   Ulf Wohlers (Objects and 3D models).
   Fabian Pache (about map details and 3d models, ``UW2`` conversations
   ``UW2`` player save <http://uw2rev.sourceforge.net>).

   Further infos about weapon animation and miscellaneous bits about uw were
   contributed by Telemachos from peroxide.dk.

   I also like to thank Telemachos who pointed me to the TSSHP's file formats
   file at the start of all of this.

   This file is probably:
   Copyright (c) 2008,2009 Julien Langer
   Copyright (c) 2002,2008,2009 Fabian Pache
   Copyright (c) 2000,2001,2002,2003 Jim Cameron
   Copyright (c) 2002,2003,2004 Michael Fink
   Copyright (c) 2004 Kasper Fauerby

##### Credits from the Underworld Adventures Project
   My thanks go out to Jim Cameron that started the original "uw-specs.txt"
   file and subsequently found out more unknown data structures and discussed
   about file formats with me. Many thanks, Jim!

   Additional information came from Alistair Brown (basic object format, via
   the Underworld II editor available at
   <http://bearcity.pwp.blueyonder.co.uk/>), Ulf Wohlers (Objects and 3D
   models) and Fabian Pache (about map details and 3d models, ``UW2`` related,
   http://uw2rev.sourceforge.net).

   Further infos about weapon animation and miscellaneous bits about uw were
   contributed by Telemachos from peroxide.dk.

   I also like to thank Telemachos who pointed me to the TSSHP's file formats
   file at the start of all of this.

   This file is probably:
   Copyright (c) 2000,2001,2002,2003 Jim Cameron
   Copyright (c) 2002,2003,2004 Michael Fink
   Copyright (c) 2004 Kasper Fauerby

##### Other contributions to this document
[KarlClinckspoor](https://github.com/KarlClinckspoor) on ``cmb.dat``
Information on cutscene animation commands from khedoros at https://github.com/khedoros/uw-engine/blob/master/csparse.cpp


## Terminology and Conventions
``UUW`` - Ultima Underworld, take this to mean both the Underworld games

``UW1`` - Ultima Underworld 1: The Stgygian Abyss.

``UW2`` - Ultima Underworld 2: The Labyrinth of Worlds

Bits fields are referred to as zero based. Eg bit 0 is the first bit in a value.

Sections of the document that are taken wholesale from uwformats.txt are prepended with the text **UWFormats.txt:**

Division calculations, unless otherwise specified return the quotient of the calculation.

## Differences Between ``UW1`` and ``UW2``
* ``UW2`` uses a compressed ``lev.ark`` file. 
* ``UW2`` has a different lev.ark block structure.
* ``UW2`` has a scheduled event system controlled by ``*SCD.ARK*`` to allow for more advanced scripting.
* ``UW2`` Cutscenes support scrolling bitmaps.
* ``Do Traps`` in ``UW1`` are renamed ``Hack Traps`` in ``UW2``.
* ``UW2`` has additional terrain types including flowing water and slippery ice.
* ``UW2`` has a different ``Player.Dat`` file format.
* ``UW2`` supports more variables and has 3 categories of variable. Quest, Game and X-Clock.
* ``UW2`` has a concept of grouping blocks of 8 levels in to worlds. These worlds may share common hard coded behaviours and events.
* ``UW2`` has additional traps, triggers and conversation functions.
* ``UW2`` handles naming of floor and wall textures differently.

### The Worlds and Level Concept

For various calculations such as skill checks the difficulty of the skill check is given by level number. This is simple enough in ``UW1`` where there are only levels 1 to 9. However ``UW2`` can support up to 80 levels (in reality the actual implemented number of levels is about 43). To handle this the game splits the levels into logical groups of 8 level slots for each world. Eg Britannia levels are potentially levels 1 to 8, Prison Tower 9 to 16 and so on.

| World Number | World         | Starting Level |
|--------------|---------------|----------------|
| 0            | Britannia     | 1              |
| 1            | Prison Tower  | 9              |
| 2            | Killorn       | 17             |
| 3            | Ice           | 25             |
| 4            | Talorus       | 33             |
| 5            | Academy       | 41             |
| 6            | Tombs         | 49             |
| 7            | Pits          | 57             |
| 8            | Ethereal      | 65             |

The world number for a level can be found by dividing the (level number minus 1) by 8.

So for an arbritary skill check in ``UW1`` the difficulty could be given by a calculation that is X + level no where the equivalent formula in ``UW2`` is given by x + (level no-1)/8.


## Common Elements between ``UW1`` and ``UW2``
* Most game mechanics eg combat is the same.
* Object data and property formats are the same
* Tilemap data formats are the same
* Conversation machine code works the same in both games.

## File Formats
### File List
In a typical ``UUW`` installation the following files will be present

TODO: Insert table here. With brief file overview

### Tilemap and Object List

### Player Data
#### Player Data Overview
Player data is stored in ``Player.Dat`` files. In both games the data will begin with the player name, attributes, skills and various status bits. 

Then will follow game variables, game state information, player object information(same format as game world objects) and player inventory (same format as game world object lists)



#### ``UW1`` ``Player.Dat``
##### Decoding and Encoding ``UW1`` *Player.Dat*

From UW Formats:

   The file "player.dat" contains the main character data. The first 220 bytes
   are encrypted with a rather simple xor algorithm. The first byte in the
   file is the starting xor value. The next byte is xor'ed with xorvalue + 3,
   and for each next byte the xorvalue is incremented by 3. A simple
   implementation in C is here (it is assumed that xorvalue already contains
   the first byte)


```c#
int NoOfEncryptedBytes = 0xD2;
int xOrValue = buffer[0];
int incrnum = 3;
for (int i = 1; i <= NoOfEncryptedBytes; i++)
{
    if ((i == 81) | (i == 161))
    {
        incrnum = 3;
    }
    buffer[i] ^= (byte)((xOrValue + incrnum) & 0xFF);
    incrnum += 3;
}
```

The same algorithm can be used to encode the file again. The initial XOR key value can be any value. 

##### ``UW1`` ``Player.Dat`` format

| Offset D | Meaning                                                                               | Notes                                                                                                                                                                                                                                 |
|----------|---------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0        | XOR Key                                                                               |                                                                                                                                                                                                                                       |
| 1        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 2        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 3        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 4        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 5        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 6        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 7        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 8        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 9        | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 10       | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 11       | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 12       | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 13       | NAME                                                                                  |                                                                                                                                                                                                                                       |
| 14       | unused                                                                                |                                                                                                                                                                                                                                       |
| 15       | unused                                                                                |                                                                                                                                                                                                                                       |
| 16       | unused                                                                                |                                                                                                                                                                                                                                       |
| 17       | unused                                                                                |                                                                                                                                                                                                                                       |
| 18       | unused                                                                                |                                                                                                                                                                                                                                       |
| 19       | unused                                                                                |                                                                                                                                                                                                                                       |
| 20       | unused                                                                                |                                                                                                                                                                                                                                       |
| 21       | unused                                                                                |                                                                                                                                                                                                                                       |
| 22       | unused                                                                                |                                                                                                                                                                                                                                       |
| 23       | unused                                                                                |                                                                                                                                                                                                                                       |
| 24       | unused                                                                                |                                                                                                                                                                                                                                       |
| 25       | unused                                                                                |                                                                                                                                                                                                                                       |
| 26       | unused                                                                                |                                                                                                                                                                                                                                       |
| 27       | unused                                                                                |                                                                                                                                                                                                                                       |
| 28       | unused                                                                                |                                                                                                                                                                                                                                       |
| 29       | unused                                                                                |                                                                                                                                                                                                                                       |
| 30       | unused                                                                                |                                                                                                                                                                                                                                       |
| 31       | Strength                                                                              | int8                                                                                                                                                                                                                                  |
| 32       | Dexterity                                                                             | int8                                                                                                                                                                                                                                  |
| 33       | Intelligence                                                                          | int8                                                                                                                                                                                                                                  |
| 34       | Attack                                                                                | int8                                                                                                                                                                                                                                  |
| 35       | Defense                                                                               | int8                                                                                                                                                                                                                                  |
| 36       | Unarmed                                                                               | int8                                                                                                                                                                                                                                  |
| 37       | Sword                                                                                 | int8                                                                                                                                                                                                                                  |
| 38       | Axe                                                                                   | int8                                                                                                                                                                                                                                  |
| 39       | Mace                                                                                  | int8                                                                                                                                                                                                                                  |
| 40       | Missile                                                                               | int8                                                                                                                                                                                                                                  |
| 41       | Mana                                                                                  | int8                                                                                                                                                                                                                                  |
| 42       | Lore                                                                                  | int8                                                                                                                                                                                                                                  |
| 43       | Casting                                                                               | int8                                                                                                                                                                                                                                  |
| 44       | Traps                                                                                 | int8                                                                                                                                                                                                                                  |
| 45       | Search                                                                                | int8                                                                                                                                                                                                                                  |
| 46       | Track                                                                                 | int8                                                                                                                                                                                                                                  |
| 47       | Sneak                                                                                 | int8                                                                                                                                                                                                                                  |
| 48       | Repair                                                                                | int8                                                                                                                                                                                                                                  |
| 49       | Charm                                                                                 | int8                                                                                                                                                                                                                                  |
| 50       | Picklock                                                                              | int8                                                                                                                                                                                                                                  |
| 51       | Acrobat                                                                               | int8                                                                                                                                                                                                                                  |
| 52       | Appraise                                                                              | int8                                                                                                                                                                                                                                  |
| 53       | Swimming                                                                              | int8                                                                                                                                                                                                                                  |
| 54       | Current vit                                                                           | int8                                                                                                                                                                                                                                  |
| 55       | max.vit                                                                               | int8                                                                                                                                                                                                                                  |
| 56       | play mana                                                                             | int8                                                                                                                                                                                                                                  |
| 57       | max. Mana                                                                             | int8                                                                                                                                                                                                                                  |
| 58       | play_hunger                                                                           | int8                                                                                                                                                                                                                                  |
| 59       | fatigue                                                                               | 0=wideawake, 17=rested, 30=awake, 45=drowsey,60=very tired,75=fatigued                                                                                                                                                                |
| 60       |                                                                                       | ?                                                                                                                                                                                                                                     |
| 61       |                                                                                       | ?                                                                                                                                                                                                                                     |
| 62       | character_Level                                                                       | int8                                                                                                                                                                                                                                  |
| 63       | ActiveSpell1                                                                          | int16' Lower byte is the effect id. Swap low and hi nibble around                                                                                                                                                                     |
| 64       | ActiveSpell1                                                                          | int16 'Upper byte is  the stability   of the effect                                                                                                                                                                                   |
| 65       | ActiveSpell2                                                                          | Int16 'Cancelled spells will still appear in this list                                                                                                                                                                                |
| 66       | ActiveSpell2                                                                          | int16                                                                                                                                                                                                                                 |
| 67       | ActiveSpell3                                                                          | int16                                                                                                                                                                                                                                 |
| 68       | ActiveSpell3                                                                          | int16                                                                                                                                                                                                                                 |
| 69       | RuneBits                                                                              | int8                                                                                                                                                                                                                                  |
| 70       | RuneBits                                                                              | int8                                                                                                                                                                                                                                  |
| 71       | RuneBits                                                                              | int8                                                                                                                                                                                                                                  |
| 72       | Selected Rune (0x24 is none)                                                          | int8                                                                                                                                                                                                                                  |
| 73       | Selected Rune                                                                         | int8                                                                                                                                                                                                                                  |
| 74       | Selected Rune                                                                         | int8                                                                                                                                                                                                                                  |
| 75       | No of items in inventory? Shifted left?                                               |                                                                                                                                                                                                                                       |
| 76       |                                                                                       |                                                                                                                                                                                                                                       |
| 77       | Weight                                                                                | int16                                                                                                                                                                                                                                 |
| 78       | Weight                                                                                | int16                                                                                                                                                                                                                                 |
| 79       | experience in 0.1 points                                                              | int32                                                                                                                                                                                                                                 |
| 80       | experience in 0.1 points                                                              | int32                                                                                                                                                                                                                                 |
| 81       | experience in 0.1 points                                                              | int32                                                                                                                                                                                                                                 |
| 82       | experience in 0.1 points                                                              | int32                                                                                                                                                                                                                                 |
| 83       | Skillpoints available to spend                                                        | int8?                                                                                                                                                                                                                                 |
| 84       | ditto?                                                                                |                                                                                                                                                                                                                                       |
| 85       | xpos                                                                                  | int16                                                                                                                                                                                                                                 |
| 86       | xpos                                                                                  | int16                                                                                                                                                                                                                                 |
| 87       | ypos                                                                                  | int16                                                                                                                                                                                                                                 |
| 88       | ypos                                                                                  | int16                                                                                                                                                                                                                                 |
| 89       | zpos                                                                                  | int16                                                                                                                                                                                                                                 |
| 90       | zpos                                                                                  | int16                                                                                                                                                                                                                                 |
| 91       |                                                                                       | save to ignore in heading?                                                                                                                                                                                                            |
| 92       | heading                                                                               | Only these bytes are used!                                                                                                                                                                                                            |
| 93       | Dungeon level                                                                         | int8                                                                                                                                                                                                                                  |
| 94       |                                                                                       |                                                                                                                                                                                                                                       |
| 95       | Silver Tree and Moonstone                                                             | Bits 0-3 Moonstone Level      Bits 4-7 Silver Tree level                                                                                                                                                                              |
| 96       | Various player status bits                                                            | Bits 0-1 incense dream   stage  (only bit 1 reference in code so   far….)      Bits 2-5 Play_poison      Bits 6-7 No of active spells. The number of active spell bits tells the   game to only activate the first no of ActiveSpells |
| 97       | Various plot flags                                                                    | Bit 0-1 possibly continuation of   no of active spells      Bit 5 is the orb destroyed      Bit 7 is the cup of wonder gotten.                                                                                                        |
| 98       | Alco related and is garamon buried                                                    | bit 2-3 = shrooms      bits 4-9 = intoxication,       bits 10-11 are set when garamon is buried.                                                                                                                                      |
| 99       | Alco related and is garamon buried                                                    | Talismans can not be destroyed until you bury garamon                                                                                                                                                                                 |
| 100      | Light level. (bits 5 to 8)                                                            | 0=none, 1=candle, 2= torch/magic light etc(?)                                                                                                                                                                                         |
| 101      | Handedness/Gender/Body/charclass                                                      | bit 0 = hand left/right, bit 1= gender,   2-4 body, bit 5-7 = class                                                                                                                                                                   |
| 102      | QuestFlags(0-31)                                                                      | int32                                                                                                                                                                                                                                 |
| 103      | QuestFlags(0-31)                                                                      | int32                                                                                                                                                                                                                                 |
| 104      | QuestFlags(0-31)                                                                      | int32                                                                                                                                                                                                                                 |
| 105      | QuestFlags(0-31)                                                                      | int32                                                                                                                                                                                                                                 |
| 106      | QuestFlag 32                                                                          |                                                                                                                                                                                                                                       |
| 107      | QuestFlag 33                                                                          |                                                                                                                                                                                                                                       |
| 108      | QuestFlag 34                                                                          |                                                                                                                                                                                                                                       |
| 109      | QuestFlag 35                                                                          |                                                                                                                                                                                                                                       |
| 110      | QuestFlag 36                                                                          | Number of talismans still to destroy                                                                                                                                                                                                  |
| 111      | QuestFlag 37                                                                          | Garamon dream related?                                                                                                                                                                                                                |
| 112      | QuestFlag 38                                                                          |                                                                                                                                                                                                                                       |
| 113      |                                                                                       | variable0                                                                                                                                                                                                                             |
| 114      |                                                                                       | variable1                                                                                                                                                                                                                             |
| 115      |                                                                                       | variable2                                                                                                                                                                                                                             |
| 116      |                                                                                       | variable3                                                                                                                                                                                                                             |
| 117      |                                                                                       | variable4                                                                                                                                                                                                                             |
| 118      |                                                                                       | variable5                                                                                                                                                                                                                             |
| 119      |                                                                                       | variable6                                                                                                                                                                                                                             |
| 120      |                                                                                       | variable7                                                                                                                                                                                                                             |
| 121      |                                                                                       | variable8                                                                                                                                                                                                                             |
| 122      |                                                                                       | variable9                                                                                                                                                                                                                             |
| 123      |                                                                                       | variable10                                                                                                                                                                                                                            |
| 124      |                                                                                       | variable11                                                                                                                                                                                                                            |
| 125      |                                                                                       | variable12                                                                                                                                                                                                                            |
| 126      |                                                                                       | variable13                                                                                                                                                                                                                            |
| 127      |                                                                                       | variable14                                                                                                                                                                                                                            |
| 128      |                                                                                       | variable15                                                                                                                                                                                                                            |
| 129      |                                                                                       | variable16                                                                                                                                                                                                                            |
| 130      |                                                                                       | variable17 (used in left -right center puzzle)                                                                                                                                                                                        |
| 131      |                                                                                       | variable18                                                                                                                                                                                                                            |
| 132      |                                                                                       | variable19                                                                                                                                                                                                                            |
| 133      |                                                                                       | variable20                                                                                                                                                                                                                            |
| 134      |                                                                                       | variable21                                                                                                                                                                                                                            |
| 135      |                                                                                       | variable22                                                                                                                                                                                                                            |
| 136      |                                                                                       | variable23                                                                                                                                                                                                                            |
| 137      |                                                                                       | variable24 Bullfrog                                                                                                                                                                                                                   |
| 138      |                                                                                       | variable25                                                                                                                                                                                                                            |
| 139      |                                                                                       | variable26  (always set to 53 on a   new game?)                                                                                                                                                                                       |
| 140      |                                                                                       | variable27                                                                                                                                                                                                                            |
| 141      |                                                                                       | variable28                                                                                                                                                                                                                            |
| 142      |                                                                                       | variable29                                                                                                                                                                                                                            |
| 143      |                                                                                       | variable30                                                                                                                                                                                                                            |
| 144      |                                                                                       | variable31                                                                                                                                                                                                                            |
| 145      |                                                                                       | variable32                                                                                                                                                                                                                            |
| 146      |                                                                                       | variable33                                                                                                                                                                                                                            |
| 147      |                                                                                       | variable34                                                                                                                                                                                                                            |
| 148      |                                                                                       | variable35                                                                                                                                                                                                                            |
| 149      |                                                                                       | variable36                                                                                                                                                                                                                            |
| 150      |                                                                                       | variable37                                                                                                                                                                                                                            |
| 151      |                                                                                       | variable38                                                                                                                                                                                                                            |
| 152      |                                                                                       | variable39                                                                                                                                                                                                                            |
| 153      |                                                                                       | variable40                                                                                                                                                                                                                            |
| 154      |                                                                                       | variable41                                                                                                                                                                                                                            |
| 155      |                                                                                       | variable42                                                                                                                                                                                                                            |
| 156      |                                                                                       | variable43                                                                                                                                                                                                                            |
| 157      |                                                                                       | variable44                                                                                                                                                                                                                            |
| 158      |                                                                                       | variable45                                                                                                                                                                                                                            |
| 159      |                                                                                       | variable46                                                                                                                                                                                                                            |
| 160      |                                                                                       | variable47                                                                                                                                                                                                                            |
| 161      |                                                                                       | variable48                                                                                                                                                                                                                            |
| 162      |                                                                                       | variable49                                                                                                                                                                                                                            |
| 163      |                                                                                       | variable50                                                                                                                                                                                                                            |
| 164      |                                                                                       | variable51                                                                                                                                                                                                                            |
| 165      | 52                                                                                    | variable52                                                                                                                                                                                                                            |
| 166      | Theoretical extra variables?                                                          | variable53                                                                                                                                                                                                                            |
| 167      |                                                                                       | variable54                                                                                                                                                                                                                            |
| 168      |                                                                                       | variable55                                                                                                                                                                                                                            |
| 169      |                                                                                       | variable56                                                                                                                                                                                                                            |
| 170      |                                                                                       | variable57                                                                                                                                                                                                                            |
| 171      |                                                                                       | variable58                                                                                                                                                                                                                            |
| 172      |                                                                                       | variable59                                                                                                                                                                                                                            |
| 173      |                                                                                       | variable60                                                                                                                                                                                                                            |
| 174      |                                                                                       | variable61                                                                                                                                                                                                                            |
| 175      |                                                                                       | variable62                                                                                                                                                                                                                            |
| 176      |                                                                                       | variable63                                                                                                                                                                                                                            |
| 177      | True Max Mana for the orb rock                                                        |                                                                                                                                                                                                                                       |
| 178      |                                                                                       |                                                                                                                                                                                                                                       |
| 179      |                                                                                       |                                                                                                                                                                                                                                       |
| 180      |                                                                                       |                                                                                                                                                                                                                                       |
| 181      | Difficulty (?)                                                                        | 0=standard, 1=easy                                                                                                                                                                                                                    |
| 182      | Game options                                                                          | High nibble is detail level, bit 0 = sound on/off; bit 3 = music on/off                                                                                                                                                               |
| 183      |                                                                                       | Always 8? 17 when in water; 128   when wearing ring of leap      Bits 0-2 Unk usage                                                                                                                                                   |
| 184      |                                                                                       |                                                                                                                                                                                                                                       |
| 185      |                                                                                       | 1 when in water            Bit 5-7 unk                                                                                                                                                                                                |
| 186      |                                                                                       | 96 when in water (or high   nibble=6)      Bit 4 Unknow usage (set in seg008_B)      Bit 5-6 Unknown usage (set in seg008_B)                                                                                                          |
| 187      |                                                                                       |                                                                                                                                                                                                                                       |
| 188      |                                                                                       | Always FF?                                                                                                                                                                                                                            |
| 189      |                                                                                       |                                                                                                                                                                                                                                       |
| 190      |                                                                                       |                                                                                                                                                                                                                                       |
| 191      |                                                                                       |                                                                                                                                                                                                                                       |
| 192      |                                                                                       |                                                                                                                                                                                                                                       |
| 193      |                                                                                       |                                                                                                                                                                                                                                       |
| 194      |                                                                                       |                                                                                                                                                                                                                                       |
| 195      |                                                                                       |                                                                                                                                                                                                                                       |
| 196      |                                                                                       |                                                                                                                                                                                                                                       |
| 197      |                                                                                       |                                                                                                                                                                                                                                       |
| 198      |                                                                                       |                                                                                                                                                                                                                                       |
| 199      |                                                                                       |                                                                                                                                                                                                                                       |
| 200      |                                                                                       |                                                                                                                                                                                                                                       |
| 201      |                                                                                       |                                                                                                                                                                                                                                       |
| 202      |                                                                                       |                                                                                                                                                                                                                                       |
| 203      |                                                                                       |                                                                                                                                                                                                                                       |
| 204      |                                                                                       |                                                                                                                                                                                                                                       |
| 205      |                                                                                       |                                                                                                                                                                                                                                       |
| 206      |                                                                                       |                                                                                                                                                                                                                                       |
| 207      | Game Clock                                                                            | Game time appears to be calculated by converting these values                                                                                                                                                                         |
| 208      | Game Clock                                                                            | Counts up 255 seconds or 4:15 minutes                                                                                                                                                                                                 |
| 209      | Game Clock                                                                            |                                                                                                                                                                                                                                       |
| 210      | Game Clock                                                                            |                                                                                                                                                                                                                                       |
| 211      | No of inventory items held plus 1                                                     | int16 (I think)                                                                                                                                                                                                                       |
| 212      | No of inventory items held plus 1                                                     | int16 (I think)                                                                                                                                                                                                                       |
| 213      | Blocks interaction with the world?                                                    | should be 0x7f                                                                                                                                                                                                                        |
| 214      | Clip through bridges when jumping a second time when this is not set                  | should be 0x20                                                                                                                                                                                                                        |
| 215      |                                                                                       |                                                                                                                                                                                                                                       |
| 216      |                                                                                       |                                                                                                                                                                                                                                       |
| 217      |                                                                                       |                                                                                                                                                                                                                                       |
| 218      |                                                                                       |                                                                                                                                                                                                                                       |
| 219      | Inventory only works when this is set.                                                | Possibly index into start of object list                                                                                                                                                                                              |
| 220      |                                                                                       |                                                                                                                                                                                                                                       |
| 221      | Curvit as well?                                                                       |                                                                                                                                                                                                                                       |
| 222      |                                                                                       |                                                                                                                                                                                                                                       |
| 223      |                                                                                       |                                                                                                                                                                                                                                       |
| 224      |                                                                                       |                                                                                                                                                                                                                                       |
| 225      | ?                                                                                     | changed over time when testing game time                                                                                                                                                                                              |
| 226      |                                                                                       |                                                                                                                                                                                                                                       |
| 227      |                                                                                       |                                                                                                                                                                                                                                       |
| 228      |                                                                                       |                                                                                                                                                                                                                                       |
| 229      |                                                                                       |                                                                                                                                                                                                                                       |
| 230      |                                                                                       |                                                                                                                                                                                                                                       |
| 231      |                                                                                       | changed when testing game time                                                                                                                                                                                                        |
| 232      |                                                                                       |                                                                                                                                                                                                                                       |
| 233      |                                                                                       |                                                                                                                                                                                                                                       |
| 234      |                                                                                       |                                                                                                                                                                                                                                       |
| 235      |                                                                                       | changed when testing game time                                                                                                                                                                                                        |
| 236      |                                                                                       | changed when testing game time                                                                                                                                                                                                        |
| 237      |                                                                                       | changed when testing game time                                                                                                                                                                                                        |
| 238      |                                                                                       |                                                                                                                                                                                                                                       |
| 239      |                                                                                       |                                                                                                                                                                                                                                       |
| 240      |                                                                                       |                                                                                                                                                                                                                                       |
| 241      |                                                                                       |                                                                                                                                                                                                                                       |
| 242      |                                                                                       |                                                                                                                                                                                                                                       |
| 243      |                                                                                       |                                                                                                                                                                                                                                       |
| 244      |                                                                                       |                                                                                                                                                                                                                                       |
| 245      |                                                                                       |                                                                                                                                                                                                                                       |
| 246      |                                                                                       |                                                                                                                                                                                                                                       |
| 247      |                                                                                       |                                                                                                                                                                                                                                       |
| 248      | Helm (all of these subsequent values are indices into the object list at   offset 312 | int16                                                                                                                                                                                                                                 |
| 249      | Helm (enchantments are reapply on reload)                                             | int16                                                                                                                                                                                                                                 |
| 250      | Chest                                                                                 | int16                                                                                                                                                                                                                                 |
| 251      | Chest                                                                                 | int16                                                                                                                                                                                                                                 |
| 252      | Gloves                                                                                | int16                                                                                                                                                                                                                                 |
| 253      | Gloves                                                                                | int16                                                                                                                                                                                                                                 |
| 254      | Leggings                                                                              | int16                                                                                                                                                                                                                                 |
| 255      | Leggings                                                                              | int16                                                                                                                                                                                                                                 |
| 256      | Boots                                                                                 | int16                                                                                                                                                                                                                                 |
| 257      | Boots                                                                                 | int16                                                                                                                                                                                                                                 |
| 258      | TopRightShoulder                                                                      | int16                                                                                                                                                                                                                                 |
| 259      | TopRightShoulder                                                                      | int16                                                                                                                                                                                                                                 |
| 260      | TopLeftShoulder                                                                       | int16                                                                                                                                                                                                                                 |
| 261      | TopLeftShoulder                                                                       | int16                                                                                                                                                                                                                                 |
| 262      | Righthand                                                                             | int16                                                                                                                                                                                                                                 |
| 263      | Righthand                                                                             | int16                                                                                                                                                                                                                                 |
| 264      | LeftHand                                                                              | int16                                                                                                                                                                                                                                 |
| 265      | LeftHand                                                                              | int16                                                                                                                                                                                                                                 |
| 266      | RightRing                                                                             | int16                                                                                                                                                                                                                                 |
| 267      | RightRing                                                                             | int16                                                                                                                                                                                                                                 |
| 268      | LeftRing                                                                              | int16                                                                                                                                                                                                                                 |
| 269      | LeftRing                                                                              | int16                                                                                                                                                                                                                                 |
| 270      | Backpack0                                                                             | int16                                                                                                                                                                                                                                 |
| 271      | Backpack0                                                                             | int16                                                                                                                                                                                                                                 |
| 272      | Backpack1                                                                             | int16                                                                                                                                                                                                                                 |
| 273      | Backpack1                                                                             | int16                                                                                                                                                                                                                                 |
| 274      | Backpack2                                                                             | int16                                                                                                                                                                                                                                 |
| 275      | Backpack2                                                                             | int16                                                                                                                                                                                                                                 |
| 276      | Backpack3                                                                             | int16                                                                                                                                                                                                                                 |
| 277      | Backpack3                                                                             | int16                                                                                                                                                                                                                                 |
| 278      | Backpack4                                                                             | int16                                                                                                                                                                                                                                 |
| 279      | Backpack4                                                                             | int16                                                                                                                                                                                                                                 |
| 280      | Backpack5                                                                             | int16                                                                                                                                                                                                                                 |
| 281      | Backpack5                                                                             | int16                                                                                                                                                                                                                                 |
| 282      | Backpack6                                                                             | int16                                                                                                                                                                                                                                 |
| 283      | Backpack6                                                                             | int16                                                                                                                                                                                                                                 |
| 284      | Backpack7                                                                             | int16                                                                                                                                                                                                                                 |
| 285      | Backpack7                                                                             | int16                                                                                                                                                                                                                                 |
| 286      | Values set when lightsource active?   Or randomly???                                  |                                                                                                                                                                                                                                       |
| 287      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 288      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 289      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 290      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 291      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 292      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 293      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 294      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 295      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 296      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 297      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 298      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 299      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 300      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 301      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 302      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 303      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 304      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 305      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 306      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 307      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 308      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 309      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 310      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 311      | Values set when lightsource active?                                                   |                                                                                                                                                                                                                                       |
| 312      | Inventory Info                                                                        | Object data in same format as master object lists in lev.ark                                                                                                                                                                          |


#### ``UW2`` ``Player.Dat``
##### Decoding and Encoding ``UW2`` *Player.Dat*

From UWFormats:

   The player.dat of uw2 is encoded with a different scheme than the one of
   uw1. The encryption algorithm uses a block of magic bytes in combination
   with previous ciphertext and plaintext.

   File layout

   0000   int8    magic seed
   0001 - 037D    encrypted character data
   037E - eof     inventory data in plaintext

   How to set up the magic bytes:
   The magic bytes are always 80 (0x50) bytes. They are filled in 4 rounds
   with differing stride using and changing the magic seed (MS from now on).
   The algorithm assumes the MS to be stored in an unsigned 8 bit variable
   and will overflow on MS multiple times.

   Magic Array (MA) fill algorithm:

```c#
    MS += 7;
    for (i = 0; i<80; ++i)
    {
        MS += 6;
        MA[i] = MS;
    }
    for (i = 0; i<16; ++i)
    {
        MS += 7;
        MA[i*5] = MS;
    }
    for (i = 0; i<4; ++i)
    {
        MS += 0x29;
        MA[i*12] = MS;
    }
    for (i = 0; i<11; ++i)
    {
        MS += 0x49;
        MA[i*7] = MS;
    }

```

   Notes on filling the MA bytes:
     - not resetting MS between loops is intentional.
      - unlike the first two rounds, the last two rounds are cut short.
      - the algorithm to fill MA was derived from an assembly trace of
        Robin Wöhlers uw2edit.exe. He uses a round 0 before the first round
        which is subsequently overwritten. This first round only results in
        increasing MS by 7, thus the first line of the algorithm outlined here.

   Example:
   A magic seed of 0x98 results in the following MA:
       0 | dc ab b1 b7 bd 8d c9 25 d5 db 94 e7 41 f3 6e 9b
      10 | 05 0b 11 17 a2 b7 29 2f 6a a9 41 47 00 53 b0 5f
      20 | 65 6b 71 49 93 83 89 8f be 9b 92 a7 ad c5 b9 bf
      30 | c5 db cc d7 dd e3 e9 d3 24 fb 01 07 da 13 19 6d
      40 | 25 e1 31 37 3d 43 b6 4f 55 5b 61 ef 6d ff 79 7f

   Decrypting PLAYER.DAT:
   After setting up the MA, the ciphertext of the character (C) can be
   decrypted to the plaintext of the character (P). The ciphertext of
   0x037D bytes is split in blocks of 0x50 bytes, with the last block
   being cut short.

   Each block is decoded as follows, with ^ denoting a XOR operation:
     P[0] = C[0] ^ M[0]
     for (i=1; i<0x50;++i)
     {
        P[i] = C[i] ^ (P[i-1] + C[i-1] + M[i])
     }
   Notes on decrypting:
     - remember to account for the shorter last block
     - in terms of cryptography, this algorithm sucks. don't reuse
     - the algorithm is fully symmetric and can also be used for encryption
     - the algorithm was derived from an assembly trace of Underworld 2.

   Encrypting:
   As mentioned before, the same algorithm can be used to encrypt and decrypt.
   The trick is figuring out MS and MA. If an existing file is modified, MS
   and MA can be reused if the first letter of the character name is not
   changed. Otherwise a new MS and MA have to be calculated.

   Apparently the the MS can be calculated as
       0xAA ^ (first letter of character name), thanks Al_B from TTLG forums



##### ``UW2`` *Player.Dat* format

| Offset(d) | Meaning                                                                                    | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-----------|--------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0         | XOR Key                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 1         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 2         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 3         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 4         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 5         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 6         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 7         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 8         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 9         | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 10        | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 11        | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 12        | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 13        | NAME                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 14        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 15        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 16        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 17        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 18        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 19        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 20        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 21        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 22        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 23        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 24        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 25        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 26        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 27        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 28        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 29        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 30        | unused                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 31        | Strength                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 32        | Dexterity                                                                                  | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 33        | Intelligence                                                                               | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 34        | Attack                                                                                     | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 35        | Defense                                                                                    | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 36        | Unarmed                                                                                    | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 37        | Sword                                                                                      | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 38        | Axe                                                                                        | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 39        | Mace                                                                                       | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 40        | Missile                                                                                    | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 41        | Mana                                                                                       | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 42        | Lore                                                                                       | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 43        | Casting                                                                                    | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 44        | Traps                                                                                      | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 45        | Search                                                                                     | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 46        | Track                                                                                      | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 47        | Sneak                                                                                      | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 48        | Repair                                                                                     | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 49        | Charm                                                                                      | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 50        | Picklock                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 51        | Acrobat                                                                                    | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 52        | Appraise                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 53        | Swimming                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 54        | Current vit                                                                                | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 55        | max.vit                                                                                    | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 56        | play mana                                                                                  | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 57        | max. Mana                                                                                  | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 58        | play_hunger                                                                                | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 59        | fatigue                                                                                    | 0=wideawake, 17=rested, 30=awake, 45=drowsey,60=very tired,75=fatigued                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 60        |                                                                                            | cleared after sleeping?? (dream tracker?, hp before a void dream??)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 61        |                                                                                            | ?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 62        | character_Level                                                                            | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 63        | ActiveSpell1                                                                               | int16' Lower byte is the effect   id. Swap low and hi nibble around      (spellsubclass << 4) + (spellclass)                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 64        | ActiveSpell1                                                                               | int16 'Upper byte is  the stability   of the effect                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 65        | ActiveSpell2                                                                               | Int16 'Cancelled spells will still appear in this list. Use counter at   +60h to manage what is active                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 66        | ActiveSpell2                                                                               | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 67        | ActiveSpell3                                                                               | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 68        | ActiveSpell3                                                                               | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 69        | RuneBits                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 70        | RuneBits                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 71        | RuneBits                                                                                   | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 72        | Selected Rune (0x24 is none)                                                               | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 73        | Selected Rune                                                                              | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 74        | Selected Rune                                                                              | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 75        | Current Weight Carried                                                                     | int16, in units of 0.1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 76        | Current Weight Carried                                                                     | int16, in units of 0.1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 77        | Max Carry Weight                                                                           | int16, in units of 0.1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 78        | Max Carry Weight                                                                           | int16, in units of 0.1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 79        | experience in 0.1 points                                                                   | int32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 80        | experience in 0.1 points                                                                   | int32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 81        | experience in 0.1 points                                                                   | int32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 82        | experience in 0.1 points                                                                   | int32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 83        | Skillpoints available to spend                                                             | int8?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 84        |                                                                                            | ?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 85        | xpos                                                                                       | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 86        | xpos                                                                                       | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 87        | ypos                                                                                       | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 88        | ypos                                                                                       | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 89        | zpos                                                                                       | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 90        | zpos                                                                                       | int16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 91        |                                                                                            | save to ignore in heading? (up and down angle?)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 92        | heading                                                                                    | Only these bytes are used!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 93        | Dungeon level                                                                              | int8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 94        |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 95        | Level where the 1st moonstone is located                                                   | Initially map 3(block #2)      when zero the moon stone cannot be reached                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 96        | Level where the 2nd moonstone is located                                                   | Initallly map 45 (block #44)      Player needs to hold one moonstone to access the other, looks like the   teleport will only go to the value in 0x5E                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 97        | Player Status                                                                              | Bit 0 Weapon drawn      Bit 1-4 play_poison. How badly poisoned is the player, counts down   periodically when poisoned, badly ->mildly->barely poisoned etc      Bit 5,6,7 LSB of active spell effects count (to confirm)                                                                                                                                                                                                                                                                                                                                                                 |
| 98        | Player Status                                                                              | bit 0 MSB of active spell effects   count (to confirm)      bits 1-2 Count of Rune Stones Selected in Bag      bit 3 The armageddon spell has been cast, forces maps to be reset when   visited      bit 4-5 likely that it is a counter for how "high" the avatar is   and how long mushroom effects will last for. Value set to 2 when drinking   basillisk oil after int vs 14h skill check      bit 6-7 Drunkness (LSB bits, flows into next byte)                                                                                                                                     |
| 99        | Player Status                                                                              | Bits 0-3 Drunkeness (MSB bits from   previous byte)      Bit 4 Automap(?) set to 1 when in most worlds, set to 0 in the void. Very   likely controls if automap is turned on. Value enabled at gamestart.      Bit 5 Unknown, referenced by text_string_trap in relation to the traps   owner (bit5) value, would cause the trap text output to be skipped when this   bit is unset      Bits 6-7 LSB Bits of Dream Plant ingested (random value, possible count   down for how long will be spent in the void, counts down even when outside   the void also includes bit 0 of next byte) |
| 100       | Player Status                                                                              | Bit 0 MSB Bit of Dream plant   ingested bits from above      Bit 1 Avatar is dreaming in the void      Bit 2 Avatar is dueling in the pits of carnage                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 101       | Light Level  Bits 4-7                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 102       | Handedness/Gender/Body/charclass                                                           | bit 0 = hand left/right,       bit 1= gender,       2-4 body,       bit 5-7 = class                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 103       | Quests 0 to 3                                                                              | 0 is garg is free, It is set in a   conversation but not by the setquest function      Set quest.cs in the underworld scene for full descriptions of the quest   variable values                                                                                                                                                                                                                                                                                                                                                                                                           |
| 104       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 105       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 106       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 107       | Quests 4 to 7                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 108       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 109       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 110       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 111       | Quests 8 to 11                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 112       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 113       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 114       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 115       | Quests 12 to 15                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 116       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 117       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 118       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 119       | Quests 16 to 19                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 120       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 121       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 122       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 123       | Quests 20 to 23                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 124       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 125       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 126       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 127       | Quests 24 to 27                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 128       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 129       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 130       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 131       | Quests 28 to 31                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 132       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 133       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 134       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 135       | Quests 32 to 35                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 136       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 137       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 138       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 139       | Quests 36 to 39                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 140       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 141       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 142       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 143       | Quests 40 to 43                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 144       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 145       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 146       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 147       | Quests 44 to 47                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 148       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 149       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 150       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 151       | Quests 48 to 51                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 152       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 153       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 154       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 155       | Quests 52 to 55                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 156       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 157       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 158       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 159       | Quests 56 to 59                                                                            | Questflag 58                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 160       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 161       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 162       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 163       | Quests 60 to 63                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 164       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 165       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 166       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 167       | Quests 64 to 67                                                                            | Bit 1 is quest flag 64                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 168       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 169       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 170       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 171       | Quests 68 to 71                                                                            | set during end game?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 172       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 173       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 174       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 175       | Quests 72 to 75                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 176       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 177       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 178       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 179       | Quests 76 to 79                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 180       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 181       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 182       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 183       | Quests 80 to 83                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 184       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 185       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 186       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 187       | Quests 84 to 87                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 188       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 189       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 190       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 191       | Quests 88 to 91                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 192       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 193       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 194       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 195       | Quests 92 to 95                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 196       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 197       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 198       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 199       | Quests 96 to 99                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 200       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 201       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 202       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 203       | Quests 100 to 103                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 204       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 205       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 206       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 207       | Quests 104 to 107                                                                          | 104 is set by variable 32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 208       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 209       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 210       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 211       | Quests 108 to 111                                                                          | Quest flag 109                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 212       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 213       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 214       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 215       | Quests 112 to 115                                                                          | Strike Related Quests                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 216       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 217       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 218       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 219       | Quests 116 to 119                                                                          | Quest flag 119?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 220       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 221       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 222       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 223       | Quests 120 to 123                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 224       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 225       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 226       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 227       | Quests 124 to 127                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 228       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 229       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 230       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 231       | Quest 128                                                                                  | What lines of power have been cut                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 232       | Quest 129                                                                                  | Your win-loss record in the pits (see also xclock)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 233       | Quest 130                                                                                  | Bit flag of Gems that have been used up                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 234       | Quest 131                                                                                  | Bit field of what world you are in. Bit 0 = prison, 1 = kilorn etc?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 235       | Quest 132                                                                                  | Quests unconfrimed from here on                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 236       | Quest 133                                                                                  | How much jospur owes you for pit fights                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 237       | Quest 134                                                                                  | Is prison tower password but value changes when brain creatures are   destroyed in kilorn                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 238       | Quest 135                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 239       | Quest 136                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 240       | Quest 137                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 241       | Quest 138                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 242       |                                                                                            | 139                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 243       |                                                                                            | 140                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 244       | TODO:Try and find when this is set to 3 originally!                                        | Bit field of what worlds you have visited so far? (141)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 245       |                                                                                            | 142                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 246       | related to endgame?                                                                        | 143                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 247       | Quest 144? Special case in conversaton:getquest. Initialised to 8                          | 144                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 248       | Tested in dream world or dreaming                                                          | 145                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 249       | Automap related                                                                            | Maybe flag to say no automap on   this level?? Or variable to id which map level is being looked at      Also possibly the level you are teleporting from. Needs more checking                                                                                                                                                                                                                                                                                                                                                                                                             |
| 250       | Variable0                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 251       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 252       | Variable1                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 253       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 254       | Variable2                                                                                  | No of candles removed from Killorn basement trap                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 255       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 256       | Variable3                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 257       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 258       | Variable4                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 259       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 260       | Variable5                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 261       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 262       | Variable 6                                                                                 | What world you will teleport to if you enter the gem. Value cycles on a   timer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 263       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 264       | Variable7                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 265       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 266       | Variable8                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 267       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 268       | Variable9                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 269       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 270       | Variable10                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 271       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 272       | Variable11                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 273       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 274       | Variable12                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 275       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 276       | Variable13                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 277       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 278       | Variable14                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 279       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 280       | Variable15                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 281       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 282       | Variable16                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 283       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 284       | Variable17                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 285       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 286       | Variable18                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 287       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 288       | Variable19                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 289       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 290       | Variable20                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 291       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 292       | Variable21                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 293       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 294       | Variable22                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 295       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 296       | Variable23                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 297       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 298       | Variable24                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 299       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 300       | Variable25                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 301       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 302       | Variable26                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 303       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 304       | Variable27                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 305       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 306       | Variable28                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 307       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 308       | Variable29                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 309       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 310       | Variable30                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 311       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 312       | Variable31                                                                                 | Contents of scintillus 4 vending machine                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 313       |                                                                                            |   0=fish, 1=meat,2=ale, 3=leeches,   4=water, 5=dagger,6 =lockpick,7=torch,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 314       | Variable32                                                                                 | Contents of scintillus 1 vending machine                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 315       |                                                                                            |   0=fish, 1=meat,2=ale, 3=leeches,   4=water, 5=dagger,6 =lockpick,7=torch,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 316       | Variable33                                                                                 | Contents of since scintilus 6 vending machine                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 317       |                                                                                            |   0=fish, 1=meat,2=ale, 3=leeches,   4=water, 5=dagger,6 =lockpick,7=torch,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 318       | Variable34                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 319       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 320       | Variable35                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 321       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 322       | Variable36                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 323       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 324       | Variable37                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 325       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 326       | Variable38                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 327       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 328       | Variable39                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 329       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 330       | Variable40                                                                                 | Set when you you are cleared to pass the first checkpoint in PT2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 331       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 332       | Variable41                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 333       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 334       | Variable42                                                                                 | When gargs door is opened this is set? Used for scheduled events                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 335       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 336       | Variable43                                                                                 | Set in convo when player is on lvl 7 of tower and has permission to see   bishop                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 337       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 338       | Variable44                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 339       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 340       | Variable45                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 341       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 342       | Variable46                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 343       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 344       | Variable47                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 345       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 346       | Variable48                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 347       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 348       | Variable49                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 349       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 350       | Variable50                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 351       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 352       | Variable 51                                                                                | Is this related to quest 51. Used on ice world 1 for trigger. Also used   in scintillus for arrow/tym rune trap                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 353       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 354       | Variable 52                                                                                | Set in corridor up out of gem chamber. Continually set to zero when   moving through the sewers                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 355       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 356       | Variable 53                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 357       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 358       | 54                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 359       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 360       | 55                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 361       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 362       | 56                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 363       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 364       | 57                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 365       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 366       | 58                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 367       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 368       | 59                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 369       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 370       | 60                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 371       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 372       | 61                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 373       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 374       | 62                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 375       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 376       | 63                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 377       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 378       | 64                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 379       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 380       | 65                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 381       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 382       | 66                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 383       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 384       | 67                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 385       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 386       | 68                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 387       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 388       | 69                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 389       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 390       | 70                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 391       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 392       | 71                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 393       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 394       | 72                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 395       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 396       | 73                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 397       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 398       | 74                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 399       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 400       | 75                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 401       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 402       | 76                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 403       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 404       | 77                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 405       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 406       | 78                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 407       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 408       | 79                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 409       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 410       | 80                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 411       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 412       | 81                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 413       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 414       | 82                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 415       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 416       | 83                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 417       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 418       | 84                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 419       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 420       | 85                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 421       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 422       | 86                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 423       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 424       | 87                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 425       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 426       | 88                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 427       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 428       | 89                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 429       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 430       | 90                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 431       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 432       | 91                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 433       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 434       | 92                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 435       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 436       | 93                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 437       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 438       | 94                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 439       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 440       | 95                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 441       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 442       | 96                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 443       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 444       | 97                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 445       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 446       | 98                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 447       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 448       | 99                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 449       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 450       | 100                                                                                        | Start of Qbert Array                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 451       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 452       | 101                                                                                        | First colour in qbert                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 453       |                                                                                            | 2=blue, 0=red, 3=purple, 4=yellow, 5=final                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 454       | 102                                                                                        | Second colour in qbert                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 455       |                                                                                            | Most recent colour is the target colour for the pyramid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 456       | 103                                                                                        | Third Colour in qbert                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 457       |                                                                                            | The number is the texture map index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 458       | 104                                                                                        | Fourth Colour in Qbert                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 459       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 460       | 105                                                                                        | Final colour in qbert.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 461       |                                                                                            | Should be five. Gets set after all other pyramids are set                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 462       | 106                                                                                        | Always FF                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 463       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 464       | 107                                                                                        | Related to Qbert puzzle                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 465       |                                                                                            |  Set to 1 when you need to set the   colours in the room                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 466       | 108                                                                                        | Last tile coordinates changed by the qbert puzzle.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 467       |                                                                                            | Bits 0-5 = tileX, 6-11 = tile Y                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 468       | 109                                                                                        | Used in britannias throne room to trigger a hack trap? This might be a   quest var instead                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 469       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 470       | 110                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 471       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 472       | 111                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 473       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 474       | 112                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 475       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 476       | Variable 113                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 477       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 478       | Variable 114 (duplicate with below!!!)                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 479       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 480       | Variable 115                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 481       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 482       | 116                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 483       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 484       | 117                                                                                        | 117 and 118 have something to do with the mist trap in the tombs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 485       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 486       | 118                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 487       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 488       | 119                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 489       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 490       | 120                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 491       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 492       | 121                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 493       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 494       | 122                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 495       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 496       | 123                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 497       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 498       | 124                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 499       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 500       | 125                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 501       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 502       | 126                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 503       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 504       | Variable 127                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 505       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 506       |  Bit field Variables (changed when   trap xpos =1)                                         | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 507       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 508       |                                                                                            | 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 509       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 510       |                                                                                            | 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 511       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 512       |                                                                                            | 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 513       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 514       |                                                                                            | 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 515       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 516       |                                                                                            | 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 517       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 518       |                                                                                            | 6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 519       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 520       |                                                                                            | 7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 521       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 522       |                                                                                            | 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 523       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 524       |                                                                                            | 9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 525       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 526       |                                                                                            | 10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 527       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 528       |                                                                                            | 11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 529       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 530       |                                                                                            | 12                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 531       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 532       |                                                                                            | 13                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 533       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 534       |                                                                                            | 14                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 535       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 536       |                                                                                            | 15                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 537       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 538       |                                                                                            | 16                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 539       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 540       |                                                                                            | 17                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 541       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 542       |                                                                                            | 18                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 543       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 544       |                                                                                            | 19                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 545       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 546       |                                                                                            | 20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 547       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 548       |                                                                                            | 21                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 549       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 550       |                                                                                            | 22                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 551       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 552       |                                                                                            | 23                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 553       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 554       |                                                                                            | 24                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 555       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 556       |                                                                                            | 25                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 557       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 558       |                                                                                            | 26                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 559       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 560       |                                                                                            | 27                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 561       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 562       |                                                                                            | 28                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 563       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 564       |                                                                                            | 29                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 565       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 566       |                                                                                            | 30                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 567       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 568       |                                                                                            | 31                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 569       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 570       | Bit wise variable for level 5 scintlus to indicate what switches are up /   down.          | 32                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 571       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 572       |                                                                                            | 33                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 573       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 574       |                                                                                            | 34                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 575       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 576       |                                                                                            | 35                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 577       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 578       |                                                                                            | 36                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 579       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 580       |                                                                                            | 37                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 581       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 582       |                                                                                            | 38                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 583       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 584       |                                                                                            | 39                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 585       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 586       |                                                                                            | 40                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 587       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 588       |                                                                                            | 41                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 589       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 590       |                                                                                            | 42                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 591       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 592       |                                                                                            | 43                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 593       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 594       |                                                                                            | 44                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 595       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 596       |                                                                                            | 45                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 597       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 598       |                                                                                            | 46                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 599       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 600       |                                                                                            | 47                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 601       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 602       |                                                                                            | 48                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 603       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 604       |                                                                                            | 49                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 605       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 606       |                                                                                            | 50                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 607       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 608       |                                                                                            | 51                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 609       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 610       |                                                                                            | 52                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 611       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 612       |                                                                                            | 53                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 613       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 614       |                                                                                            | 54                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 615       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 616       |                                                                                            | 55                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 617       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 618       |                                                                                            | 56                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 619       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 620       |                                                                                            | 57                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 621       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 622       |                                                                                            | 58                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 623       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 624       |                                                                                            | 59                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 625       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 626       |                                                                                            | 60                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 627       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 628       |                                                                                            | 61                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 629       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 630       |                                                                                            | 62                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 631       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 632       |                                                                                            | 63                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 633       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 634       |                                                                                            | 64                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 635       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 636       |                                                                                            | 65                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 637       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 638       |                                                                                            | 66                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 639       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 640       |                                                                                            | 67                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 641       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 642       |                                                                                            | 68                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 643       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 644       |                                                                                            | 69                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 645       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 646       |                                                                                            | 70                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 647       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 648       |                                                                                            | 71                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 649       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 650       |                                                                                            | 72                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 651       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 652       |                                                                                            | 73                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 653       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 654       |                                                                                            | 74                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 655       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 656       |                                                                                            | 75                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 657       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 658       |                                                                                            | 76                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 659       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 660       |                                                                                            | 77                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 661       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 662       |                                                                                            | 78                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 663       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 664       |                                                                                            | 79                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 665       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 666       |                                                                                            | 80                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 667       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 668       |                                                                                            | 81                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 669       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 670       |                                                                                            | 82                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 671       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 672       |                                                                                            | 83                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 673       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 674       |                                                                                            | 84                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 675       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 676       |                                                                                            | 85                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 677       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 678       |                                                                                            | 86                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 679       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 680       |                                                                                            | 87                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 681       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 682       |                                                                                            | 88                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 683       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 684       |                                                                                            | 89                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 685       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 686       |                                                                                            | 90                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 687       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 688       |                                                                                            | 91                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 689       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 690       |                                                                                            | 92                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 691       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 692       |                                                                                            | 93                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 693       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 694       |                                                                                            | 94                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 695       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 696       |                                                                                            | 95                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 697       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 698       |                                                                                            | 96                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 699       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 700       |                                                                                            | 97                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 701       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 702       |                                                                                            | 98                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 703       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 704       |                                                                                            | 99                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 705       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 706       |                                                                                            | 100                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 707       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 708       |                                                                                            | 101                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 709       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 710       |                                                                                            | 102                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 711       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 712       |                                                                                            | 103                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 713       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 714       |                                                                                            | 104                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 715       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 716       |                                                                                            | 105                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 717       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 718       |                                                                                            | 106                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 719       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 720       |                                                                                            | 107                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 721       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 722       |                                                                                            | 108                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 723       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 724       |                                                                                            | 109                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 725       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 726       |                                                                                            | 110                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 727       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 728       |                                                                                            | 111                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 729       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 730       |                                                                                            | 112                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 731       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 732       |                                                                                            | 113                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 733       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 734       |                                                                                            | Variable114 (used in Loths tomb)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 735       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 736       |                                                                                            | 115                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 737       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 738       |                                                                                            | 116                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 739       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 740       |                                                                                            | 117                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 741       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 742       |                                                                                            | 118                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 743       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 744       |                                                                                            | 119                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 745       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 746       |                                                                                            | 120                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 747       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 748       |                                                                                            | 121                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 749       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 750       |                                                                                            | 122                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 751       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 752       |                                                                                            | 123                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 753       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 754       |                                                                                            | 124                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 755       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 756       |                                                                                            | 125                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 757       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 758       |                                                                                            | 126                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 759       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 760       |                                                                                            | 127                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 761       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 762       | Automap enabled setting backup                                                             | Set to 1 after dreaming in the   void      Bit 4 set in scheduled events (stores the value of automap enabled when   going to the void) allows remembering the value when returning to a normal   world to keep automap enabled properly                                                                                                                                                                                                                                                                                                                                                   |
| 763       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 764       | 2nd byte of xpos to return to when dreaming in the void (first byte is   ignored!          | So the game uses your position in the void to fill the first byte                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 765       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 766       | 2nd byte of ypos to return to when dreaming in the void (first byte is   ignored!)         | So the game uses your position in the void to fill the first byte                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 767       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 768       | Return from dream level                                                                    | Set after/during dreaming of void   (related to dungeon level)      Looks like (dungeon level <<8) + (player heading >>8)                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 769       | Dream Level                                                                                | Level you went to sleep on (when having visions of the void)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 770       | Difficulty                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 771       | Game options                                                                               | High nibble is detail level, bit 0 = sound on/off; bit 3 = music on/off                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 772       | relation to motion state                                                                   | This value (bits 0-2) is used at   init to affect the values in 0x306            01 when grounded bit 0      02 when in water bit 1      04 when entering lava bit 2      08 when standing on snow or ice bit 3      10 when jumping bit 4      20 when just entering into water (sound can be heard) bit 5                                                                                                                                                                                                                                                                                |
| 773       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 774       | Length of time the player is paralysed for (seconds?)                                      | Value sets to 0d when paralyzed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 775       | Likely tile state, also type of   screen shake being applied (bits 5-7)                    | Bit 0 - Player is in water      Bit 1 - Player is standng in lava (takes damage while in effect)      Bit 2 - Player is on ice or snow terrain *not necessarily sliding      Bit 3 ? Player bobs as if swimming      Bit 4 ? No obvious effect but clears once player jumps      Bit 5 ? Screen shakes until player jumps or a timer(?) runs out      Bit 6 ? Same but tilting left and right      Bit 7 ? Same but translating left and right                                                                                                                                             |
| 776       | Swimming damage time counter                                                               | Based on swim skill increment   randomly until value is >=120d.       After that apply damage based on swim skill. Happens on a regular game tick                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 777       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 778       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 779       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 780       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 781       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 782       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 783       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 784       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 785       | level lore value for xskills                                                               | There are 80 of these? For 80   levels? In x_skills the player lore skill in each offset by dungeon level                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 786       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 787       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 788       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 789       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 790       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 791       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 792       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 793       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 794       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 795       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 796       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 797       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 798       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 799       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 800       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 801       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 802       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 803       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 804       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 805       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 806       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 807       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 808       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 809       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 810       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 811       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 812       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 813       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 814       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 815       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 816       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 817       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 818       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 819       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 820       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 821       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 822       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 823       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 824       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 825       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 826       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 827       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 828       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 829       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 830       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 831       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 832       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 833       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 834       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 835       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 836       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 837       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 838       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 839       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 840       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 841       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 842       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 843       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 844       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 845       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 846       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 847       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 848       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 849       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 850       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 851       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 852       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 853       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 854       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 855       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 856       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 857       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 858       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 859       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 860       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 861       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 862       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 863       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 864       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 865       |                                                                                            | Index of warrior you are fighting in the pits                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 866       |                                                                                            | Index of warrior you are fighting in the pits                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 867       |                                                                                            | Index of warrior you are fighting in the pits                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 868       |                                                                                            | Index of warrior you are fighting in the pits                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 869       |                                                                                            | Index of warrior you are fighting in the pits                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 870       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 871       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 872       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 873       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 874       | Game Clock                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 875       | Game Clock                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 876       | Game Clock                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 877       | Game Clock                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 878       | Referenced a lot (maybe the day or clock related) or a mythical xclock0                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 879       | X_CLOCK 1 !!!!                                                                             | THIS CONTROLS Plot progress EVENTS IN THE CASTLE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 880       | X_CLOCK 2? (related to gem usage)                                                          | These following values are x_clocks?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 881       | Djinn Capture (x_clock 3?)                                                                 | Value 2 is basilisk oil thrown in the mud. Value 3 is you have dipped in   the mud. 4 is getting baked (clears lower bits), 5 (you are at the sigil?), 6   you have absorbed the djinn                                                                                                                                                                                                                                                                                                                                                                                                     |
| 882       | X Clock 4                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 883       | X Clock 5                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 884       | X Clock 6                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 885       | X Clock 7                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 886       | X Clock 8                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 887       | X Clock 9                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 888       | X Clock 10                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 889       | X Clock 11                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 890       | X Clock 12                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 891       | X Clock 13                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 892       | X clock 14                                                                                 | How many enemies you've defeated in the pits arena                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 893       | Encryption ends somewhere around here / XCLOCK 15                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 894       | No of items+1                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 895       | These values (0x37d to 0x387) probably have something to do with   inventory slot displays |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 896       | Static object for player 0                                                                 | In the same format as other static and mobile game objects                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 897       | Static object for player 1                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 898       | Static object for player 2                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 899       | Static object for player 3                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 900       | Static object for player 4                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 901       | Static object for player 5                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 902       | Static object for player 6                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 903       | Static object for player 7                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 904       | Mobile Object for player 1                                                                 | npc_hp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 905       | Mobile Object for player 2                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 906       | Mobile Object for player 3                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 907       | Mobile Object for player 4                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 908       | Mobile Object for player 5                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 909       | Mobile Object for player 6                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 910       | Mobile Object for player 7                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 911       | Mobile Object for player 8                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 912       | Mobile Object for player 9                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 913       | Mobile Object for player 10                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 914       | Mobile Object for player 11                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 915       | Mobile Object for player 12                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 916       | Mobile Object for player 13                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 917       | Mobile Object for player 14                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 918       | Mobile Object for player 15                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 919       | Mobile Object for player 16                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 920       | Mobile Object for player 17                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 921       | Mobile Object for player 18                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 922       | WhoAmI for Player                                                                          | Initiates to 0xFDh                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 923       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 924       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 925       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 926       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 927       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 928       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 929       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 930       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 931       | Helm (all of these subsequent values are indices into the object list                      | Assuming same order as uw1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 932       | Helm (enchantments are reapply on reload)                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 933       | Chest                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 934       | Chest                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 935       | Gloves                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 936       | Gloves                                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 937       | Leggings                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 938       | Leggings                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 939       | Boots                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 940       | Boots                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 941       | TopRightShoulder                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 942       | TopRightShoulder                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 943       | TopLeftShoulder                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 944       | TopLeftShoulder                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 945       | Righthand                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 946       | Righthand                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 947       | LeftHand                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 948       | LeftHand                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 949       | RightRing                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 950       | RightRing                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 951       | LeftRing                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 952       | LeftRing                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 953       | BackPack0                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 954       | BackPack0                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 955       | BackPack1                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 956       | BackPack1                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 957       | BackPack2                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 958       | BackPack2                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 959       | BackPack3                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 960       | BackPack3                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 961       | BackPack4                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 962       | BackPack4                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 963       | BackPack5                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 964       | BackPack5                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 965       | BackPack6                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 966       | BackPack6                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 967       | BackPack7                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 968       | BackPack7                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 969       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 970       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 971       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 972       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 973       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 974       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 975       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 976       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 977       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 978       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 979       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 980       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 981       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 982       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 983       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 984       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 985       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 986       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 987       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 988       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 989       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 990       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 991       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 992       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 993       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 994       |                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 995       | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 996       | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 997       | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 998       | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 999       | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 1000      | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 1001      | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 1002      | First Inventory object                                                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

### Object data ``objects.dat``

UWFormats.txt: Object properties specific to a range of objects are stored in the file ``objects.dat``. The file contains several tables. Here is an overview:

|pos  | size  |   desc                    |     entries |  bytes per entry|
|-----|-------|---------------------------|-------------|-----------------| 
|0000 | Int16 |   unknown, always 0x010f  |             |                 |
|0002 | 0x80  |   melee weapons table     |    16       |  8 bytes        |
|0082 | 0x30 |    ranged weapons table    |    16       |  3 bytes        | 
|00b2 | 0x80 |    armour and wearables table|  32       |  4 bytes        |
|0132 | 0x0c00|   critters table          |    64       | 48 bytes        |
|0d32 | 0x30 |    containers table        |    16       |  3 bytes        |
|0d62 | 0x20 |     light source table     |    16      |  2 bytes         |
|0d82 | 0x10 |    Food Nutrition          |    16       |  1 byte*        |
|0d92 | 0x10 |    Trigger Type Table      |   16        |  1 byte         |
|0da2 | 0x40 |    animation object table  |    16       |  4 bytes        |
|0de2 |          end                                                      |

* Note UWFormats had classed the table at 0d82 to be a jewelry info table original. It actually appears to be related to food nutrition and of size 16 bytes
* Some of the details in the following section were incorrect in UWformats.txt. The corrected version of the data based on my research is presented here.

#### Melee Weapons Table

| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
|   0     | int8          | Slash ``Damage``          |                                             |
|   1     | int8          | Bash ``Damage``           |                                             |
|   2     | int8          | Stab ``Damage``           |                                             |
|   3     | int8          |                           |    Unknown values here are possibly related |
|   4     | int8          |                           |         to attack charge calculations       |
|   5     | int8          |                           |                                             |
|   6     | int8          | Skill                     | 3: sword, 4: axe, 5: mace, 6: unarmed       |
|   7     | int8          | Durability                |                                             |

#### Ranged Weapons Table
Table is  a mix of missile ammo, missile weapons and magic projectiles

| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
| 0       | int8          | ``Damage``                |  The base damage for this missile           |
| 1       | int8          | ``Durability``            |                                             |
| 2       | int8          | Ammo Type/``Vulnerability``( or magic damage type?)|When a missile launcher give the index+32 of the ammo this weapon uses. When a missile projectile this appears to the the damage vulnerability for the weapon. (possibly a two complement negation). A value of 0xC0 appears to apply a normal damage calculation. TODO CONFIRM                                           |


#### Armour and Wearables Table

| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
| 0       | int8          | ``Protection``            | How much defensive protection is provided by the armour |
| 1       | int8          | ``Durability``            | How resistant this object is to being damage itself. A value of 0xFF means invulnerable to damage |
| 2       | int8          | UNKNOWN                   | Possibly unused data                        |
| 3       | int8          | Wearable slot             | What slot the item can be worn in.          |

The Wearable slots are 
|Slot number | Wearable type |
|------------|---------------|
|0           | Shield/arms   |
|1           | Torso         |
|3           | Legs          |
|4           | Gloves        |
|5           | Boots         |
|8           | Head          |
|9           | Rings         |

#### Critters Table
Ingame there are actually 127 entries in this table. The final entry which is all 0s is reserved for the player data and is copied over from the ``player.dat`` file. This is the representation of the player as a "critter" in the game.
The presence of player attributes in the critter data point to some usages of data in this table.

| Offset | Size     | Name                       | Notes                                                                                                                                                                                                                                                          |
|--------|----------|----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0      | int8     | Level                      | The character level. When set to 1 for critters this applies a damage   reduction                                                                                                                                                                              |
| 1      | int8     | Body part damage reduction | The damage reduction given by armour for a TODO body part                                                                                                                                                                                                      |
| 2      | int8     | Body part damage reduction | The damage reduction given by armour for a TODO body part                                                                                                                                                                                                      |
| 3      | int8     | Body part damage reduction | The damage reduction given by armour for a TODO body part                                                                                                                                                                                                      |
| 4      | int8     | Max HP                     |                                                                                                                                                                                                                                                                |
| 5      | int8     | ``Strength`` attribute     |                                                                                                                                                                                                                                                                |
| 6      | int8     | ``Dexterity`` attribute    |                                                                                                                                                                                                                                                                |
| 7      | int8     | ``Intelligence`` attribute |                                                                                                                                                                                                                                                                |
| 8      | int8     | Fluid and remains          | A combination of remains after death and the type of blood splatters this   produces.   Fluids bits 5,6,7   Bits 3,4 appear to be weapon   vulnerabilities, Bits 0,1 is the sound to play on death. TODO RECONFIRM as   usages are mixed vs what is documented |
| 9      | int8     | Race/General Type          | TODO RECONFRIM (An index into the strings on page 8, offset 370. This   string is the generic name for the creature, like "a creature" for   "a goblin" or "a rat" for "a giant rat". )                                                                        |
| 0xA    | int8     | Passiveness                | Bits 2,3,4 Corpse object to drop offset by 0xC0, bit 6 is the critter a   swimmer, bit 7 is the critter a flier                                                                                                                                                |
| 0xB    | int8     | Unknown                    |                                                                                                                                                                                                                                                                |
| 0xC    | int8     | Movement speed             |                                                                                                                                                                                                                                                                |
| 0xD    | int8     | Unknown                    | but used in trading                                                                                                                                                                                                                                            |
| 0xE    | int8     | Unknown                    |                                                                                                                                                                                                                                                                |
| 0xF    | int8     | ``Poison`` Damage,         |  how much max poison level can this   critter apply in an attack                                                                                                                                                                                               |
| 10     | int8     | NPC Category               | TODO List the categories. These are masked by value 0xF                                                                                                                                                                                                        |
| 11     | int8     | EquipmentDamage            |                                                                                                                                                                                                                                                                |
| 12     | int8     | TODO                       | Possibly a defence value                                                                                                                                                                                                                                       |
| 13     | int8     | Slash attack attack score  |                                                                                                                                                                                                                                                                |
| 14     | int8     | Slash attack Damage        |                                                                                                                                                                                                                                                                |
| 15     | int8     | Slash attack Probability   | How likely the critter will choose to make this attack If all zeros then   attack will not be made.                                                                                                                                                            |
| 16     | int8     | Bash attack attack score   |                                                                                                                                                                                                                                                                |
| 17     | int8     | Bash attack Damage         |                                                                                                                                                                                                                                                                |
| 18     | int8     | Bash attack Probability    | How likely the critter will choose to make this attack If all zeros then   attack will not be made.                                                                                                                                                            |
| 19     | int8     | Stab attack attack score   |                                                                                                                                                                                                                                                                |
| 1a     | int8     | Stab attack Damage         |                                                                                                                                                                                                                                                                |
| 1b     | int8     | Stab attack Probability    | How likely the critter will choose to make this attack If all zeros then   attack will not be made.                                                                                                                                                            |
| 1c     | int8     | UNKNOWN                    | This value squared + 3 is used to compare with player distance from npc.   Possibly stealth detection score, Also used for attack flee threshold calcs.   TODO reconfirm                                                                                       |
| 1d     | int8     | Search distance            | Used to calculate search distances. Used as a check value in   DetectMonsters()                                                                                                                                                                                |
| 1e     | int8     | UNKNOWN                    | Bits 4,5,6,7 Referenced in angering npcs during theft as a distance. An   awareness range?                                                                                                                                                                     |
| 1f     | int8     | Possibly missile skill     | Missile Accuracy or skill and another value that is looked at in   NpcWanderUpdate() to decide if NPC changes course. Referenced in combat   movement too                                                                                                      |
| 20     | 3 x int8 | Loot table                 | See loot table below                                                                                                                                                                                                                                           |
| 23     | int8     | UNKNOWN                    |                                                                                                                                                                                                                                                                |
| 24     | int8     | UNKNOWN                    |                                                                                                                                                                                                                                                                |
| 25     | int8     | UNKNOWN                    |                                                                                                                                                                                                                                                                |
| 26     | int8     | Coin Loot                  | Bits 5-7 probability coins are dropped. Lower is better, Bits 0-3 coin   drop calculation divisor TODO document this calculation                                                                                                                               |
| 27     | int8     | UNKNOWN                    |                                                                                                                                                                                                                                                                |
| 28     | int16    | Experience                 | What exp is gained when killing this critter                                                                                                                                                                                                                   |
| 2a     | 3 x int8 | Spell attack list          | List of spells critter can cast. All zeros for no spells. If a list   exists then final entry is FF                                                                                                                                                            |
| 2d     | int8     | Magic user info            | bits 1-7 references in StudyMonster. Bit 0 is the critter a magic caster                                                                                                                                                                                       |
| 2e     | int8     | Door unlock skill          | How proficent is this critter at opening doors. 0 cannot open doors. TODO   document other value meanings. I think it's    lockpicking skill score??)                                                                                                          |
| 2f     | int8     | UNKNOWN                    | Always 0x65                                                                                                                                                                                                                                                    |

##### Loot sub table
TODO Double check the calculation.
| Bit   | Meaning                                                |
|-------|--------------------------------------------------------|
| 0     | Set if loot can be spawned                             |
| 1-7   | Loot item id is given by bits 1 to 4 PLUS bits 5 to 7  |


#### Containers table

| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
| 0       | int8          | Capacity                  | In 0.1 stones                               |
| 1       | int8          | Objects accepted          | 0: runes, 1: arrows, 2: scrolls, 3: edibles, 0xFF: any |
| 2       | int8          | Trigger Mode              | number of slots available 0xFF means unlimited |

#### Light Sources table
| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
| 0       | int8          | Brightness                | Max value is 4?                             |
| 1       | int8          | Duration                  | Value of 0 means light never goes out       |


#### Food Nutrition table
| Offset  |  Size         | Name                      | Notes                                         |
|---------|---------------|---------------------------|-----------------------------------------------|
| 0       | int8          | Nutrition                 | The amount of hunger reduction of a food item |

When used with liquids a negative value is stored. In this case, minus this value is added to the player ``intoxication`` value.

#### Trigger Type Table
This table associates the various ``triggers`` with their general type to control the circumstances in which they fire.
Eg so a look trigger does not fire when the triggering action is movement.

| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
| 0       | int8          | Trigger Mode              | What type of trigger is this                |

Trigger Mode values are

| Mode | Type             | Notes |
|------|------------------|-------|
| 0    | Move             |       |
| 2    | Pick up          |       |
| 4    | Use              |       |
| 5    | Look             |       |
| 7    | Pressure         |       |
| 0F   | Pressure release |       |
| 6    | Enter            |       |
| 0E   | Exit             |       |
| 0B   | Unlock           |       |
| 0A   | Timer            |       |
| 8    | Open             |       |
| 9    | Close            |       |
| 0C   | Scheduled        |       |


#### Animation Object Table
| Offset  |  Size         | Name                      | Notes                                       |
|---------|---------------|---------------------------|---------------------------------------------|
| 0       | int8          | Capacity                  | unknown (0x00, 0x21 or 0x84)                |
| 1       | int8          | Objects accepted          | unknown (always 0x00)                       |
| 2       | int8          | Capacity                  | start frame (from ``animo.gr``)             |
| 3       | int8          | Objects accepted          | number of frames                            |

### Object Combining ``cmb.dat``

UWFormats.txt: In the Ultima Underworlds, when you `apply' certain objects to one another
in your inventory a new object is created. 

For example, pole + strong thread = fishing pole. 

The mechanism for this is very simple and is controlled by the file ``cmb.dat`` in the data/ directory.

This file contains a table of 3 16-bit words for each allowable
combination: ``source1``, ``source2``, ``newobject`` in that order.

3 zeros mark the end of the table. 

The low 9 bits of each word is the object ID.

If an object of type ``source1`` is applied to an object of type ``source2`` (or vice
versa) an object of type ``newobject`` is created.

The top bit of each of the source words indicates whether that object is destroyed in the process: if it is a 1, the object is destroyed. 

* It is always the case that at least one of the source objects is destroyed.

* New Objects are created with a default quality of 40.

From [KarlClinckspoor](https://github.com/KarlClinckspoor)
* There's a max of 10 item combinations. You can add more to cmb.dat, but the game won't recognize them.
* If two items aren't flagged for destroying, they combination won't go through, but no errors will be raised.
* If the created item can't be normally picked up, you won't be able to place it in your inventory
* Items with durability seem to be created with serviceable durability (I made a mistake in the text saying they are created with excellent durability, it's specific to the black sword)
* It's slightly different in UW1 and UW2. The hard limit of 10 items is the same, but while in UW1 a final entry was all zeroes, in UW2 empty entries are all 0xFFFF.



#### Common Object Data ``comobj.dat``
From UWFormats:   Object properties common to all items are stored in the file "comobj.dat". 
The number of object properties is determined by (filelen-2) / 11   (each entry is 11 bytes long).
The first two bytes of the file contain unknown information. Each entry has the following format



| Offset |Size  |   Bits    | Name               | Notes                                        |
|--------|------|-----------|--------------------|----------------------------------------------|
| 0      |int8  |           | Height             |                                              |
| 1      |int16 |  0-2      | Radius             |                                              |
|        |      |  4-15     | Mass               | mass in 0.1 stones                           |
| 3      |int8  |  5        | Can be picked up   |                                              |
|        |      |  6-7      | Linkable/Stackable | 0 or 2 means object can stacked, 1 or 3 means it can be linked to another object.|
| 4      |int16 |           | Monetary value     |                                              |
| 6      |int8  |  2-3      | Quality Class      | Cannot be removed from the world when colliding in projectile motion when =3 Also door strength, 3=invulnerable, other values shift the damage value left |
| 7      |int8  |  1-4      | Destroy on impact  | Checked when object hits the ground, only set when object is a damaging projectile type so this is probability the missile is removed from the world on impact when Rng (0-7) is less thanthe value. Any value >=8 means the projectile is destroyed on impact, 0 means object is not removed on impact. If the mobile object has bits 4,5,6 at offset 0xA set to 1 the projectile will be removed regardless of the below value and a splash spawned                                                 |
|        |      |  5        | Unknown raycast    | Value used in relation to raycasting         |
| 8      |int8  |  0-1      | Apply vulnerability chance |Used against an rng(0-2) call to see if damage vulnerabilitites will apply |
|        |      |  3        | Unknown            | Set for demonic npcs only. Vulnerability?    |
|        |      |  4        | Undead flag        | Set for undead npcs only                     |
|        |      |  5        | Unknown            | Possibly vulnerability to fire               |
|        |      |  6        | Unknown            | Only set on animos                           |
|        |      |  7        | Unknown            | Only set on undead                           |
| 9      |int8  |  0-1      | Render type        | 0 = sprite,1 = animated npc,2 = 3d model, 3 = texture map|
|        |      |  2-5      | Culling priority   | A lower value means the object is more likely to be culled when the game needs more object space. |
| 10     |int8  |  0-3      | Qualty Type        | Use to get the quality description strings, eg pristine, spoiled, worn etc |
|        |      |  4        | LookAt Flag        | Uses a detailed LookAt Description that begins with "You See" instead of just printing the object name |

From UWFormats on Quality Type
Each possible value of "quality type" maps onto a group of 6 strings in block 4 from lowest to highest quality. Items which have a quality are always described as "a/an <quality> <item>", with the exception of group D  which is for armour items which are grammatically plural even if there is only one of the object, e.g. "leather leggings".


### Graphic Formats
#### Textures

#### Sprites

#### Bitmaps

#### 3D Models

TODO: UWformats.txt deals with this topic better than I could.

#### Cutscenes

### Dungeon Light Levels

#### Light.dat and Mono.dat
Lighting in Underworld is achieved by the use of light maps which are used to map the appropiately shaded colours from the palette based on the current light level.

There 16 different lightmaps that are stored in the files ``light.dat`` and ``mono.dat``  (mono.dat is used for the invisibility spell).
Each light map is 256 bytes long and stores the value to lookup in the main palette.

A pixel on a sprite or texture maps first to the value in the lightmap and then that value is used to look up the main palette.

From ``UWFormats.txt``:
   Palette mappings for different light/darkness levels are stored in the
   file "light.dat". The file consists of 16 blocks of palette mappings. Each
   block contains 256 Int8 values which map colors to their palette indices in
   the game palette. The first block is the mapping for original colors, and
   the last one is for "almost black".

   The file "mono.dat" contains palette mappings that maps colors to grayscale
   values. It has the same format as the "light.dat" file and can be
   interchanged to get a gray underworld look. It is used for the spell
   "invisibility".

#### Shades.dat

> Below info may be slightly wrong.

The file shades.dat is used to control what light maps are used. The lookup index into this table is calculated from the player held light sources (value obtained from the light data table in ``objects.dat``), the ``dl.dat`` ambient light  or from the current magic light spell being cast. The highest active light value is used. 

The table appears to define what lightmaps is used near to the player (their light source) and what lightmap this light will use at a distance far away from the player. 

The entries are equivilant to the below light spell levels

| Entry   |  Light level    |
|---------|-----------------|
|  0      | Darkness        |
|  1      | Burning Match   |
|  2      | Candlelight     |
|  3      | Light           |
|  4      | Magic Lantern   |
|  5      | Night Vision    |
|  6      | Daylight        |
|  7      | Sunlight        |


The table appears to have the following structure.

8 entries of 12 bytes length
Each entry appears to be 5 int16 values. 

| Offset(d) | Description          |  Notes                                                             |
|-----------|----------------------|--------------------------------------------------------------------|
|  0        | Near distance offset | The higher this value is the closer the darkness is to the camera  |
|  2        | Light map            | Possibly the starting light map                                    | 
|  4        | Step ?               | The stepping to increase the start light map by until reaching all dark |
|  6        | cutoff distance?     | The distance to be rendered (tiles?) before going all dark         |
|  8        | Flat shading dist?   | Usually equal to 16d but low values will shade the textures with a flat colour |
|  10       | Unk                  | No obvious effect                                                   |


It appears the game has constraints on what values can be used here. A far lightmap cannot be brighter than the near one. The far distance cannot be closer than the near distance. Otherwise a fully dark image is displayed.

When the shades.dat file is missing or renamed the levels will be displayed in full bright.

It appears the step value is used to generate a 16 value array of lightmap indices. That array is then used to generate a 16x32 array of more precise shading presumably for the looking up values relative to the player camera. Values outside the cutoff distance will be shaded dark.

#### Dl.dat
In ``UW2`` there is an additional data file called ``dl.dat``. This file contains 80 entries of int8 values.
The entries correspond to the game levels and define the ambient light level for the maps, the light level that the level has when the player is not using a light source of their own.
The value in dl.dat is used in conjunction with the light flag bit for the tile to calculate the actual ambient light level.

A good example of usage of this is in the castle in ``UW2``. Inside the main halls of the castle the light is bright but moving into the secret passages it becomes darker.

The shading to apply is calculated as follows

```
    var dungeon_ambientlight = DlDatValue;
    var remainder = dungeon_ambientlight % 10;
    var dlFlag = 0;
    if (dungeon_ambientlight >=10)
    {
        dlFlag=1;
    }
    int tileLightFlag = TileMap.current_tilemap.Tiles[playerdat.tileX,playerdat.tileY].lightFlag;
    if ((tileLightFlag ^ dlFlag) == 1)
    {
        dungeon_ambientlight = remainder;
    }
    else
    {
        dungeon_ambientlight = -1;
    }                
    if (dungeon_ambientlight>lightlevel)
    {
        lightlevel = dungeon_ambientlight;
    }
```

### Chrgen.dat
A data file containing the string numbers to be used during character generation.
The header of the file contains the question string number and is of length 144 bytes

Record format
|Byte | Desc          |
|-------|---------------|
|0      | Question string no|
|1-7    | Always 0      |
|8      | No of answers |
|9-17   | always 0      |

The remainder of the file is the string numbers to be used to answer the corresponding question.
Format is arrays of string numbers (int16s) terminated with 0. The arrays will be of size no Of Answers from the header.


TODO confirm how it works with skills.dat for multiple skill questions.




### Scheduled Events (*SCD.ARK*)

## Game Mechanics
### RNG
RNG is based on the game time that the game has started at.

### Leveling Up and Experience Points
Levelling up and Experience(EXP) can be more complex than expected.

From Mitch Aigner's FAQ level ups occur at the below thresholds. I'm unsure if the skill point per exp is correct. Disassmembly of the ``UW2`` experience functions seem to indicate that the EXP gain is based on the new player level. Level 2 - 2 points, level 3 - 3 points etc but this needs to be properly tested. (it's possible both facts are true, points per exp gain and points per level gained.)

| Level |  Exp. Points |   Exp./Skill pt. |
|-------|--------------|------------------|
|1      |     0        |   50             | 
|2      |    50        |                  |
|3      |   100        |                  |
|4      |   150        |                  |
|5      |   200        |                  |
|6      |   300        |  100             |
|7      |   400        |                  |
|8      |   600        |                  |
|9      |   800        |                  |
|10     |  1200        |  150             |
|11     |  1600        |                  |
|12     |  2400        |                  |
|13     |  3200        |                  |
|14     |  4800        |                  |
|15     |  6400        |                  |


Experience is known to increase and decrease in the following circumstances

* Killing an NPC.
* Finding a map piece in Loth's tomb (xp gain is world number + 1)
* When visiting new maps (mechanic not fully understood but appears to be linked to character level). A good example of this in action is if you run from level 1 of ``UW`` straight to level 2. Enough exp for a level gain occurs without any combat.
* In conversations using the ``x_exp`` ``imported function``.
* Change in the ``new_player_exp`` ``imported variable`` after a conversation
* Special death case when killing Fissif. (Possibly you can beat him up and he'll surrender to go to jail) TODO test this
* When player is sent to jail in Brittania. Appears to be 1/9th of Exp
* When player is resurrected. Also appears to be 1/9th of Exp
* From the action of ``an_experience_trap``


It's expected normally that Exp gains are just based on the Exp reward defined in the ``objects.dat`` for the npc. However a number of factors modify this value.

Random 2D dice roll is made to modify the Exp value.
```c#
return 2Dexp + (exp * 4);
```

If the npc killed is powerful; then the Exp reward is increased by a calculation (TODO confirm calculation here)

However any exp reward (from any exp gain source) appears to be reduced when a calculation based on the current map level no is compared with the player level. This appears to indicate that going back to earlier levels to defeat enemies is less rewarding for EXP then killing them at a lower character level. This needs to be tested more.

```c#

int x = dungeonlevel-1;
x = x / 8; //This is the UW2 world calculation. Assume UW1 is just dungeonlevel -1
x = x * 2;
x = x + 2;
if (x < charlevel)
  {
    ExpGain = (ExpGain/2) + 1
  }
```

The game supports negative Exp changes but these will never bring player exp negative.
Negative exp changes will not affect skill points or change the character level. There is a 50:50 chance that a negative skill change will have + 1 added to it for an unknown purpose.

When the player is arrested in Britannia the exp is reduced by 1/9th (TODO confirm) of the current player Exp.



###  Attributes
#### Strength
``Strength`` is used for the following calculations

Max HP is ``30 + ((Strength * Char Level)/5)``

Max Carry Weight is ``300 + (Strength * 13)``
* Unit 0.1 Stones

Strength controls resistance to intoxication. When alcohol is consumed a ``skill check`` of the intoxication level vs the strength score is rolled.
The skill check can have the following results

| Result       | Impact                                              |
|--------------|-----------------------------------------------------|
| Crit Fail    | Player passes out                                   |
| Fail         | Screenshakes                                        |
| Success      | Nothing                                             |
| Crit Sucesss | Player heals by 2hp. Message about feeling better   |

#### Intelligence
``Intelligence`` is used for the following calculations

Max Mana is ``((Mana Skill+1)*Int)>>3``

Intelligence controls resistance to hallucination (TO CONFIRM)

#### Dexterity

TODO

#### Cheat Detection
The game will detect that a character has been cheated with if the total attributes score at the end of the game is greater than 100.


### Skills
#### Skill Checks
2 parameters are passed to the skill check function. The skill value and a check difficulty. The difficulty is subtracted from the skill value and a dice roll of 0 to 30 is made and added to give a score value.

The score value is compared to a range of values to give one of 4 skill check results.

| Final Score  | Result           | Return value |
| ------------ | ---------------- | ------------ |
| < 3          | Critical Fail    | -1           |
| >=4 and<16   | Fail             | 0            |
| >=16 and<=29 | Success          | 1            |
| >29          | Critical Success | 2            |


```c#
score = (skill-difficulty)+ rng (0-30d);

  if (score < 0x1d) {
    if (score < 0x10) {
      if (score < 3) {
         result = -1 ; //0xffff; //critical failure
      }
      else { 
        result = 0;  //failure
      }
    }
    else {
      result = 1; //sucess
    }
  }
  else { //more than 29
    result = 2; //critical sucess
  }
  return result;
```


#### Specific Skills

##### Attack
##### Defence
##### Unarmed
##### Sword, Axe and Mace
##### Missile
##### Mana
Controls the ``mana`` points the player has. Available ``mana`` is the skill multipled by TODO. 

##### Lore
Used for identification of objects. 

When an object is looked at, a skill check of ``Lore`` Vs 8 is performed and the result stored in the object ``heading`` value.

The ``heading`` bits 0-1 are set with values as follows:

    0 = Unidentified
    1 = Identified as being magical
    2 = Fully identified

Bit 2 is used to track if an identification attempt has been made. Value is set to 1 when the ``lore`` check is attempted. This prevents spamming ``lore`` checks when to brute-force identification. When the ``lore`` skill is increased this value is reset to 0 for all objects in the player inventory to allow re-examination.

The following table lists the probabilities of each outcome depending on the player skill level

| Player lore skill | Fully identified | Identified as being magical | Unidentified |
|-------------------|------------------|-----------------------------|--------------|
| 1                 | 0.0              | 22.58                       | 77.41        |
| 2                 | 0.0              | 25.80                       | 74.19        |
| 3                 | 0.0              | 29.03                       | 70.96        |
| 4                 | 0.0              | 32.25                       | 67.74        |
| 5                 | 0.0              | 35.48                       | 64.51        |
| 6                 | 0.0              | 38.70                       | 61.29        |
| 7                 | 0.0              | 41.93                       | 58.06        |
| 8                 | 3.22             | 41.93                       | 54.83        |
| 9                 | 6.45             | 41.93                       | 51.61        |
| 10                | 9.67             | 41.93                       | 48.38        |
| 11                | 12.90            | 41.93                       | 45.16        |
| 12                | 16.12            | 41.93                       | 41.93        |
| 13                | 19.35            | 41.93                       | 38.70        |
| 14                | 22.58            | 41.93                       | 35.48        |
| 15                | 25.80            | 41.93                       | 32.25        |
| 16                | 29.03            | 41.93                       | 29.03        |
| 17                | 32.25            | 41.93                       | 25.80        |
| 18                | 35.48            | 41.93                       | 22.58        |
| 19                | 38.70            | 41.93                       | 19.35        |
| 20                | 41.93            | 41.93                       | 16.12        |
| 21                | 45.16            | 41.93                       | 12.90        |
| 22                | 48.38            | 41.93                       | 9.67         |
| 23                | 51.61            | 41.93                       | 6.45         |
| 24                | 54.83            | 41.93                       | 3.22         |
| 25                | 58.06            | 41.93                       | 0.0          |
| 26                | 61.29            | 38.70                       | 0.0          |
| 27                | 64.51            | 35.48                       | 0.0          |
| 28                | 67.74            | 32.25                       | 0.0          |
| 29                | 70.96            | 29.03                       | 0.0          |
| 30                | 74.19            | 25.80                       | 0.0          |

##### Casting
Used to perform a skill check whenever the player casts a runic spell. ``Casting``.

The skill check is ``Casting`` vs spell level * 3 is performed.

The casting skill check can have 3 results.
* Critical Success and Success- Spells is cast
* Failure - Spell incantation Failed
* Critical Failure - Spell backfires and applies TODO damage.

##### Traps
Used for disarming traps.

Skill is used when interacting with an object that is linked to a ``Damage Trap``. The trap can be any of the objects in the linked object chain. Not just the directly linked object

In``UW2`` trap difficulty is given by the formula.

```c#
Result = TrapSkill vs  (((DungeonLevel-1)/8) * 2 + 8)
```

Possible outcomes

| Skill check result | Event            |
|--------------------|------------------|
| Crit Success       | Trap disarmed    |
| Success            | Trap disarmed    |
| Fail               | Unable to defuse |
| Crit Fail          | Trap goes off    |


The ``Search`` skill is used to find the traps. See below

##### Search
The ``Search`` skill is evaluated when looking at objects that are linked to a ``Look Trap`` when the look trap has a ??? value set. A skill check is performed against the look skill and if passed the trigger linked to the ``Look Trap`` is executed.


It is also used to detect traps as follows

In ``UW2`` the difficulty of this skill check is based on the ``dungeon_level`` the player is on.

```c#
Result = SearchSkill vs  (((DungeonLevel-1)/8) * 2 + 10)
```

TODO confirm how this works in ``UW1`` but presumably
```c#
Result = SearchSkill vs  ((DungeonLevel-1) * 2 + 10)
```


##### Track
The ``Track`` skill is mainly used to detect if any creatures are located nearby when *F9* is pressed.

TODO More detail on how this works

###### Fishing Skill Check

In ``UW2`` the ``Track`` skill is used when when fishing. If (``Track``+7)/8 >= RNG(0-4) then a fish can be caught (assuming there is inventory space).

In ``UW1`` the ``Track`` skill is not used and instead it is a rng(0-4) roll. If that result is 0 then the fish can be caught.

#### Sneak
To confirm. Compared with a critter object properties value to see if they can become aware of the player. 

#### Repair
Checked when the player performs a ``repair`` on an object using an ``anvil``. Used to evaluation the difficulty message and to calculate the resulting change on object ``quality`` when the ``repair`` is done.

The difficulty estimate of the ``repair`` is based on the items ``durability`` which is used in the below pseudocode to return a string number offset for the estimate. Possible string values trivial (0), simple(1), possible(2), hard(3) and very difficult(4)

```c#
score = repair - durability + 15d
if (score<0)
  {
    return 0 //trivial
  }
  else
  {
    if (score > 30)
    {
      return 4 //Very Difficult
    }
    else
    {
      return 1 + (score/10) // gives a range of 1 to 3, simple, possible and hard. 
    }
  }
```

When the ``repair`` takes place an addition of time of up to 15 minutes is added to the ``game clock``.
```c#
RepairTime = ((durability*3)-RepairSkill) - (quality/2)
if (RepairTime>15)
  {
    RepairTime = 15
  }
```

The result of the ``repair`` is a skillcheck of the item ``durability`` vs the ``repair`` skill.

* Critical Success. Item repaired to full ``quality`` (64d)
* Success. ``Quality`` increased by ``3 + ( RepairSkill /5 )``
* Failure. No change is made to the ``quality``
* Critical Failure. A formula is used to calculate the damage. See below

```c#
if ( rng(0-63) <= quality + RepairSkill )
  {
     Damage =  4 + rng(0-7)
  }
else
  {
    Damage = 0
  }
quality = quality - Damage
```

Final ``Quality`` can be neither less than 0 or greater than 63


#### Charm
No ingame usage but may be used in conversations ``imported functions``. No identified examples of this occuring.

#### Lockpick
Skill is checked when picking a lock using a lockpick. 

The skill check is ``lockpick`` + 1 vs 3 times the ``zpos`` value of any ``a_lock`` object linked to the locked door or chest.

Possible results are
* Critical Success and Success- Door is unlocked
* Failure - Door remains locked
* Critical Failure - Door remains locked. Another skill check of ``Dexterity`` vs 20d takes place. If this fails the lockpick is broken.



#### Acrobat
Checked when the player lands after jumping or falling from a height. Skill check is performed against value TODO (To confirm was this the velocity at landing?)

Checked when standing on an unstable ice tile to see if the ice tile will collapse. See the Hack Trap/Ice Collapse Trap for details.


TODO - Does this skill have an impact on jump distance

TODO - is there skill check critical results

#### Appraise
Use to evaluate the trade deal being currently offered in bartering
Sums the value of the items being offered to and by the player. A skill check is tested against TODO and based on the sucess or failure the appropiate trade evaluation message is displayed.

#### Swimming
Use to control swimming speed(to confirm) and once a minute(to confirm) a skill check is performed against the ``swimming`` skill. 

The skill check is based on the carried and max ``weight`` encumberance of the player.
``Check Difficulty = ((Carried weight<<5)/(Max Weight))``
Depending on the check result 

If the skill check fails damage is applied based on the possible fail values of 0 or -1 using a damage roll using a D4 dice.

``Damage = (3 - CheckResult)D4``
ie 
3D4 or 4D4 damage is applied.

### Combat Mechanics

#### Attack types
Slash, Bash and Stab

TODO explain the 3x3 combat screen grid

#### Swing Charge
TODO explain min/max charge and how the charge is used to scale the damage applied.

#### Attack To Hit Calculations
Player base chance to hit is given by the following formula

``attackscore =  WeaponSkill + (AttackSkill >> 1) + (DEXTERITY / 7)``

If playing on easy difficulty a bonus of 7 is added to the score.

When using a weapon that grants the accuracy bonus the attack score is increased by the following formula in UW1. (See below for enchantment bug in UW2)
``bonus = 1 + SpellMinorClass & 0x7)``

* Spell minorclass is the level of the spell starting at 1

In ``UW2`` an additional bonus can be added by the valour spell. This bonus is given by the formula
``ValourBonus = 10 + Casting/5``; 

After totalling the base score and bonuses the hit is tested against the NPC's defence rating (commonobject.dat index 0x12) using the skillcheck function.

#### Combat Damage Calculations

#### Equipment Damage Calculations

#### UW2 Accuracy/Damage Enchantment Bug
In ``UW1`` accuracy enchantments increase the player tohit chance while damage enchantments increase the weapon damage.. Due to a bug in ``UW2`` these enchantments are applied incorrectly. This has the effect of the accuracy enchantments increasing weapon damage while the damage enchantments increase accuracy. The scores are calculated as follows
```
  if (enchant.SpellMinorClass < 4) //minor class 0-4 are displayed on equipment as accuracy bonuses
  {
      PlayerAttackDamage += (1 + enchant.SpellMinorClass << 1);
  }
  else
  {
      PlayerAttackAccuracy += ((enchant.SpellMinorClass << 1) - 7);
  }
```

#### Missile Combat

### Magic
#### Spell classes
``UUW`` seems to have the following classes of spells (major spell classes) that are grouped into logically themed groups. Within each major class of spell there will be a number of subclass spells to identify the specific spell being cast. This allows for variation of spells within the categories. EG multiple levels of healing spells.

| Major Class | Type of spell     |
| ----------- | ----------------- |
| 0           | Light             |
| 1           | Motion related    |
| 2           | Damage Resistance |
| 3           | Status Effects    |
| 4           | Healing           |
| 5           | Projectiles       |
| 6           | Area Effects      |
| 7           | Targeted Spells   |
| 8           | Summoning         |
| 9           | Cursed Objects    |
| 0xA         | Mana restore      |
| 0xB         | Misc Spells       |
| 0xC         | Unused            |
| 0xD         | Misc Spells       |
| 0xE         | Cutscenes         |

#### Runic Magic
Runic spells are defined in a hard-coded table within the exe. This table matches the spells to their major and minor class numbers to identify the spell.

| Spell | Major Class | Spell Circle | Overview |
| ----- | ----------- | ------------ | -------- |
| TODO  |             |              |          |

#### Non-runic spells
The major and minor class for other spells are classified based off of the ``link`` property of the casting object. TODO how again?


##### Class 0 Spells Light
Light spells come in the following variations which provide increasing levels of light. 

| Spell         | Level |
|---------------|-------|
| Darkness      | 0     |
| Burning Match | 1     |
| Candlelight   | 2     |
| Light         | 3     |
| Magic Lantern | 4     |
| Night Vision  | 5     |
| Daylight      | 6     |
| Sunlight      | 7     |

The spell sets the light level bits in the player data appropiately. It is assumed that each of these levels corresponds to a ``shades.dat`` palette number.


##### Class 1 Spells Motion
These spells affect the player status to allow for different movement behaviours to apply to the player during the game update loops.

| Spell      | Sublcass |
|------------|----------|
| Leap       | 1        |
| Slow Fall  | 2        |
| Levitate   | 3        |
| Water Walk | 4        |
| Fly        | 5        |
| Bouncing   | 6        |


###### Class 1 Subclass 1 Leap

###### Class 1 Subclass 2 Slowfall

###### Class 1 Subclass 3 Levitation and Subclass 5 Flying

###### Class 1 Subclass 4 Water walk

###### Class 1 Subclass 6 Bouncing

##### Class 2 Damage Resistance
Resist Blows
Thick Skin
Iron Flesh

##### Class 3 Status Effects.
Curse
Stealth
Conceal
Invisibilty
Missile Protection
Flameproof
Poison Resistance
Magic Protection
Greater Magic Protection
Valor
Poison Weapon

##### Class 4 Healing Spells

Healing spells restore a random amount of the players ``HP``. The amount of ``HP`` restored is controlled by the subclass number of the spell. The formula for the ``HP`` restored is a for ``Diceroll`` of ``8DSubClass``

Eg if the subclass of the spell is 4 (regular heal) then the ``HP`` restored is 8D4 points of ``HP``.

* The greater heal spell is a special case (subclass is 0xF) and does not do the diceroll. Instead the max ``HP`` of the character will be restored.

When healing happens to the player or an NPC then health cannot be set to a value higher than the player or NPCs max vitatility attribute.

If the healing is cast on the player the "You are healed" message is displayed.

##### Class 5 Projectiles
Magic Arrow
Lightning
Fireball
Acid
Deadly Seeker

##### Class 6 Area Effects
Reveal
Sheet Lightning
Mass Confusion
Flame Wind
Repel Undead
Mass Paralyze
Shockwave
Frost

##### Class 7 Targetted Spells
Most of these spells are where a special targeting cursor appears to confirm the spell cast on partiular "targeted" object.

Bleeding
Cause Fear
Smite Undead
Charm
Paralyze
Smite Foe
Study Monster
Dispel Rune
Mending
Remove Trap
Name Enchantment
Open
Detect Trap
Enchantment
Gate Travel

##### Class 8 Spells Summoning
Spells that spawn objects or NPCs

Create Food
Rune of Flame
Rune of Stasis
Summon Demon
Magic Satellite

##### Class A Mana Restore
Mana Boost
Restore Mana

##### Class B Misc Spells
Speed
Portal
Restoration
Locate
Cure Poison
Roaming Sight
Telekinesis
Tremor
Freeze Time
Armageddon
Dispel Hunger
Local Teleport


##### Class D Misc Spells
This class contains a misc selection of spells.

In ``UW2``
###### Class D Subclass 0  Altaras Wand Spell
This spell is used to cut the lines of power for the guardians spell. The spell checks an area of 4x4 tiles around the players location and tests for a signet ring that is has ``Invis`` = 0 and ``DoorDir`` = 0.

When found the line of power is cut and the ``DoorDir`` value is set to 1. The bitfield at quest 128 is updated depending on the world number. The ring will be removed from the object list (Door dir is probably set to prevent spamming the spell).

Special effects will occur when this happens. Spacey twinkies will spawn at the ring's location (possibly in the center of the tile) and sound effects will play (sounds no 18 and 42). The special effect flash colour (TODO what colour) is ran.

When all lines of power are cut quest 14 will update to signify all power lines are cut.

If the line is cut in the ``Ice Caverns`` quest 52 is updated. This maybe to allow for removal of the ice from ``Brittania``. 


If the spell finds nothing the message "The spell has no noticeable effect" is displayed

###### Class D Subclass 3,4,5 Basilisk Oil
This spell is the effect of the basilisk oil potion. Subclass 3 and 4 perform a skill check of player ``INT`` vs 20 to see if the ``hallucination`` effect should occur. Subclass 5 will always cause ``hallucination``.

If the skill check fails ``Hallucination`` is set to duration level 2 and the message "Your vision distorts and you feel light headed".

If the skill check passed the screen will just flash a colour (95d which is presumably a palette index).

###### Class D Subclass 7 Map Area
This spell reveals and area of the level automap in a range around the caster.

The spell will not work if cast in the ``Ethereal Void``

The player ``casting`` skill controls how much of the map is revealed. See calculation.

```c#
int a;
if (casting <= 16)
{
  a = casting;
}
else
{
  a = casting + (casting - 13);
}

range = 2 + (a / 5)
```

This gives a range of 2 to 8 tiles mapped.

A Range of 2 will map around the player as follows

```
.....
.....
..@..
.....
.....
```

The message "You gain a sudden awareness of your surroundings" is printed.

##### Class D Subclass 8 Acid Spit
Spell case that calls spell class 5, Subclass 4.

##### Class E Spells Cutscenes
These are special spells that will play a cutscene when cast. They are normally only referenced by ``Spell Traps``

The spell subclass controls the cutscene number to play and both fullscreen and windowed cutscenes can be played.

#### Runic Spells

#### Enchanted Items


### Survival Mechanics
#### Sleeping

#### Food

#### Death and Resurrection

#### Intoxication

### Game Clock and Time


## Objects

### General Object Overview
#### Door Spike
A door spike is only present in ``UW1``. The effect of a door spike is to change the ``owner`` value on a closed door to 63. As long as the value in bits 1-5 of owner are greater than 0 attacks to the door will apply half damage to it and subtract that damage from the ``owner`` value. Essentially giving the door a second health bar and damage reduction. After the ``owner`` value is cleared further damage will apply to the ``quality`` value.

### Special Objects
A summary of some objects with special behaviours

#### Guardian Signet Ring
The guardian signet ring when invisible and that has a ``Doordir`` value of 0 is used to mark a place of power for the wand of Altara spell.

#### Data Storage Crystal
The text on the data crystal is set based on the crystal ``quality``.
It can be observed to have the following properties for each character. Starting with label *Q6Y6* at ``quality`` 0 for incrementing ``quality`` values.

* Char 0 - letters goes down by 2 each time
* Char 1 - decrement by 1
* Char 2 - always Y
* Char 3 - increment by 1

This pseudocode can return the proper label value
```c#
var seed = (73-Quality)*2;
char[]Label = new char[4];
for (int c = 0; c<4; c++)
  {  
    char NewChar;  
    if ((c==0) || (c==2))
    {
       NewChar = (seed % 26) + 65;      
    }
    else
    {//c==1 or c==3
      NewChar = (seed % 10) + 48;
    }
    label[c] = NewChar;
    seed = seed + quality + 30
  }
  return label.ToString();
```

#### Turbo Lotus Esprit
This is an easter egg object that is only present in the original floppy versions of UW2. It will not appear in later versions of the games even if the object is in the map.

### Traps & Triggers

A trap is a special object that performs an operation on the game world when triggered. Triggers are special objects that are linked to a regular object or exist within the game world that when activated initiate the action of a trap. The trigger can contain paramters for the operation of the trap.

Traps and Triggers are linked to each other and can be linked in a change of actions that allow for complex events.

Example. A swich is connected to a use trigger which is connected to a door trap. When the swithch is pressed the use trigger fires and activates the door trap which will tell a specified door to open.

#### Traps
##### a_arrow trap
An arrow trap is used to fire projectiles. The item type created is controlled by the trap ``quality`` and ``owner`` values.	
``Item Type ID`` = (``quality`` << 5) | ``owner`` set in 

The launch vector for the "arrow" is simply the ``heading`` of the trap.

##### a_bridge trap
Toggles the spawning and despawning of a row of bridges of length given by the trap  ``quality``.

The row starts at trigger ``X`` and ``Y`` tile.

The trap ``heading`` controls the direction the bridges spawn (cardinal directions only) 0=north 2= east 4 = south and 6=west

Trap ``zpos`` controls the height where the bridges spawn.

Trap ``Owner`` is used to control the texture of the bridge floor

If the msb bit is set on ``owner`` then the trap will remove the bridges at the targeted location.

##### a_change from trap
Use to change a rectangle of tiles in a range starting at bottom left at the location of the change_from trap and ending at top right at a position given by a linked ``change_to_trap``. 

The tiles in the range must match with specified criteria defined in this trap and the changes to be made are defined on the ``change_to_trap`` 

A formula involving ``Heading`` and ``zpos`` seems to define a  floor texture to match for changing. TO CONFIRM
``(heading | (((zpos >> 4) & 0x1) << 3));``

##### a_change to trap
Used with the ``change_from`` trap to change a range of tiles.

The ``quality`` value sets the ``wall texture``.

The ``owner`` value sets the ``tile type``. Either ``open`` or ``solid``.

The ``zpos`` value sets the ``floor height``.

The ``floor texture`` is set by the formula ``(heading | (((zpos >> 4) & 0x1) << 3))`` TO RECONFIRM.

##### a_change terrain trap
Changes a tile from one type to another. It works over a range of tiles that are set by the traps ``X`` and ``Y`` values starting at the trigger ``X`` and ``Y``.

``Floor Texture`` is set by ``(quality >> 1) & 0xf``

``Tile Type`` is given by ``(quality & 0x01)``

The trap ``zpos`` will set the height of the ``open`` tile except when it's value is 120. In that case the trigger ``zpos`` is used instead.

In ``UW2`` the ``wall texture`` can be set by the ``owner`` value when it is less than 63d.

##### a_check variable trap
Checks a variable numbered ``zpos``. 

When the comparison is true the trigger references by the ``link`` field will fire.

In ``UW2``, if the comparison is false then any trigger referenced in the ``next`` value will fire.

``Heading`` gives the value to compare with.

In ``UW1`` there is only one array of game variables. 

In ``UW2`` there are four known variable arrays and the array to use is given by the ``heading`` value. The possble values are:

  3 X-CLOCK
  4 Game Variables
  5 A bitfield list
  6 Quest Flags

TODO: Provide more info on the variable lists in their own section.

##### a_combination trap
TODO: Find this out. ``UW1`` only??

##### a_create object trap
Creates a new object using the object referenced by the ``link`` field as a template. 

TODO: This trap has a random chance of running when sleeping to spawn monsters. Reconfirm the behaviour here.

##### a_damage trap

The damage trap is a trap that either causes direct damage or poison damage to to the player.

When the ``Owner`` value is 0 the trap is causes damage, when it is not zero it is a poisoning trap. In either case the damage or level of poison applied is given by the ``quality`` field. 

If already poisoned the new poison level is set the value. It will however not reduce the poison level from a higher one. 

Note if the player has a vulnerability to poisoning then double poisoning will apply. I'm not sure if the player has this vulnerability defined in the adventurer critter data or if there is a way to become vulnerable to poison but the code for this is present.

##### a_delete object trap
Removes the object pointed to in the ``link`` field from the world.
As the ``link`` is deleted then all trap/trigger execution halts at this trap.

##### a_do trap or a_hack_trap
The ``do`` and ``hack`` traps are special types of trap the perform advance functions. ``Do`` is the term for ``UW1`` and ``hack`` for ``UW2``.
The ``quality`` value defines what the trap is.

###### Camera Trap
``Quality`` 2

Moves the game camera to the trap location and points it in the direction given by the traps ``heading``

###### Platform Trap
``Quality`` 3

Use to raise a platform up by TODO units.

###### Trespass Trap
``Quality`` 5

Flags illegal activity to a particular race.

 Eg when the avatar enters an area they are not allowed enter the move trigger may trigger a trespass trap that angers nearby creatures if a ``stealth`` check is failed

TODO: Clarify details. example usage ``Prison Tower``

###### Class Object Trap
``Quality`` 10

Spawns class specific objects to the player in ``UW2``. Used in the hidden room in the Avatar quarters in ``Brittania``.

###### Fraznium Forcefield
``Quality`` 11

A force field that allows passage when fraznium gloves or crown are worn

###### Unused Oscillating Trap
``Quality`` 12

Appears to oscillate a row of tiles. Trap ``owner`` value increments on each call.

###### Colour Cycling Trap
``Quality`` 14

Cycles wall and floor colours.

``Owner`` From value of textures
``Zpos`` To value of textures.

The range of tiles is along the game x axis for ``ypos`` number of tiles.

###### Ice Floor Collapse Trap
``Quality`` 17

Collapses the ice floor tiles in the ``Ice Caverns``. An acrobat check is performed before the ice will break

The skill check is based on the ``weight`` carried by the player. If ``weight/12`` is 20 or less then the check value is 0. Otherwise the check will be ``weight/12`` vs ``Acrobat`` skill.

The new texture for the floor after collapsing is set to ``xpos | (ypos<<3)``

The new floor height will be the original height minus 1.

* The trap is based on a regular timer trigger, not on player motion over the tile.

###### Switch Puzzle Reset Trap
``Quality`` 18

Resets the switch puzzle on Scintillus Level 5.

###### Platform Puzzle Reset Trap
``Quality`` 19

Resets the platform puzzle on Scintillus Level 7

###### Rising Platforms Trap
``Quality`` 20

Use for the rising platforms on Level 42 (Scintillus)

###### Loth Tomb Switches
``Quality`` 21 and 22

Used for the moving switches in ``Loth's Tomb``

* ``Quality`` 22 is an unused variant where it sets ``owner`` to 1.
  
###### TMAP Change Trap
``Quality`` 23

Changes the texture of a texture map object. See trap with ``quality`` 28 below

###### Bullfrog Trap
``Quality`` 24

TODO: Document the bullfrog.
* ``UW1`` only
  
###### Change Graffiti Trap
``Quality`` 24

Changes graffiti in the ``Pits Of Carnage``

##### Bullfrog Puzzle Traps

Traps for controlling the Bullfrog puzzle on Level 4 of ``UW1``. The action of the trap is controlled by the ``Owner`` value.

| Owner    |   Action     |
|----------|--------------|
|  0       | Raise tile   |
|  1       | Lower tile   |
|  2       | Increment X  |
|  3       | Increment Y  |
|  4       | Reset tiles  |

X and Y  refer to the tile the trap is currently targeted by the trap. The value of x and Y will wrap around to 0 if incremented to 8 or more. The target tile will change ``height`` by 2 units and it's neighbour tiles will change ``height`` by 1 unit.

The reset action is triggered by a special spell called "The Frog"

It is strongly suspected that this trap is hard coded.

###### Bly Skup Chamber Trap
``Quality`` 25

Evaluates the conditions for spawning a new Bly Skup Ductosnore.

###### Scintillus Force Field Trap
``Quality`` 26

Used for the force field on Scintillus level 5
TO CONFIRM: This is the up/down forcefield??

###### Change Object Quality Trap
``Quality`` 27

Changes the ``quality`` of the ``link`` object to the trap ``owner`` value.

###### Change TMAP Trap
``Quality`` 28
Change a tmap object to use a different texture.
Trap will change the ``owner`` value of the tmap.
* This is possible used for more than changing tmaps as it will change any linked object ``owner``.

###### Random Button Flicking Trap
``Quality`` 29

This trap randomly flicks buttons. Used in ``Talorus`` level 1.

###### Avatar is a Coward Trap
``Quality`` 30

If the avatar flees combat in the pits this trap will update the game state to end the arena duel and change the win/loss records.

See the section on the ``Pits Of Carnage`` for details on how the arena works.

###### Arena of Fire Safety Trap
``Quality`` 31

This trap will fire on a trigger in the arena and detect if any NPC combatants are standing in lava. If so they are teleported to safety.

###### QBert Puzzle Trap.
``Quality`` 32

See the section on Qbert for more details.

###### Bottle Recycler Trap
``Quality`` 33

Use to recycle glass bottles on a target tile and spawn the ``monetary`` value in gold coins.

###### The Castle Goes Dry Trap
``Quality`` 34

Changes various environmental details in the castle after arriving in the ``Ice Caverns``

Eg stops the fountains, does things with mushrooms etc.

###### Light Sphere Recharge Trap
``Quality`` 35

Sets the ``quality`` of the light sphere placed in a target location to 64.

###### Britannia NPC Teleport
``Quality`` 36

Triggered after talking to Lord British. Moves NPCs to different locations in the castle.
TODO Reconfirm.

###### Unknown Trap 37
``Quality`` 37

Not seen in the wild but appears to be related to the ``*SCD.ARK*`` file.

###### Spoil Healing Potion Trap
``Quality`` 38

Trap used in ``Loth's Tomb`` to find any healing potion in the player inventory and transform them into a poisoned potion.

###### Change Visibility Trap
``Quality`` 39

Used to change the visibility of an object.

###### Vending Machine Selection Trap
``Quality`` 40

Used to change the game variable that controls the currently selected vending machine item.

###### Emerald Puzzle Trap
``Quality`` 40

Used for the emerald puzzle in the secret area on level 6 of ``UW1``

Likely that this trap is hard coded. Checks for the presense of an emerald on 4 tiles and creates a runestone as a reward.

###### Vending Machine Spawning Trap
``Quality`` 41

Used to spawn the currently selected vending machine selection.

###### Vending Machine Sign Trap
``Quality`` 42

Used to set the vending machine sign with the current selection.

###### A Talking Door!
``Quality`` 42

Use to trigger the talking door conversation in ``UW1``.


###### Change NPC Goal Trap
``Quality`` 43

Used to change the goal for a specific type of NPC
Eg. When you pick up the map piece in ``Loth's Tomb`` 1 it will make all the skeletons attack the player.

###### Sleep Trap
``Quality`` 44

Used to go to sleep when using "bridge based" beds, bridges that have a straw bed texture made to look like beds.

###### Unknown Automap Trap
``Quality`` 45

Not observed yet. Seems to be related to updating ``automap`` data.

###### Start Conversation Trap
``Quality`` 50

Used in ``UW1`` to trigger a conversation with NPC number #251 in ``Tybal's Lair`` when the player gets trapped in the prison area.

###### Gem Face Rotate
``Quality`` 54

Rotates the gem face of the blackrock gem and updates the appropiate game variable that controls what world the gem will teleport to.

TODO: Add the variable number here.

###### World Teleport Trap
``Quality`` 55

Used to teleport from the blackrock gem to a hard-coded location in another world. Available worlds are in game variable TODO and the target world in game variable TODO.


###### Unknown AI Goal Trap 62
``Quality`` 62
Currently unknown purpose. Used in ``Britannia``, ``Prison Tower`` and ``Killorn`` for an unknown purpose.

The current working theory is that it is used to direct a NPC to take an action

EG in ``Britannia`` it appears to be linked to quest 109 and 112 which is set when the player is arrested for fighting in the castle. It will set Lord British's goal to 12 (based on the ``owner`` value) and causes British to walk to the prison cell to talk to the Avatar.

###### End Game Trap
``Quality`` 63

This trap triggers the endgame cutscene and victory sequence in ``UW1``.

##### a_door trap
Opens or closes the door in the tile pointed to by the trigger ``X`` and ``Y``

The ``quality`` value gives the mode of operation:

| Mode | Action |
| ---- | ------ |
| 0    | Lock   |
| 1    | Open   |
| 2    | Close  |
| 3    | Toggle |


##### a_flam rune
An in-world rune trap that explodes and causes damage to the player

TODO: Confirm mechanics here.

##### a_jump trap
Launches a character up in the air.

The ``quality`` of the trap controls the strength of the jump trap.

##### a_null trap
A trap that performs no actions. Used to link trap/trigger chains.

##### a_pit trap
A trap that forms or closes a deep pit in the ground.

``Quality`` or possibly first 4 bits defines the texture of the tile to create at the base of the pit.

``Owner`` does the same for the floor texture at the top of the pit when closed up.

``Zpos`` is the height of the floor


##### a_proximity trap
This trap behaves more like a trigger as it takes effect when the player enters a plane given by a range that is ``owner`` by ``quality`` tiles in size starting at the position of the trap.

The ``zpos`` gives the height of the range.


##### a_set variable trap
Sets the game variable that is defined by ...

TODO: This is a complicated one to explain. I'll swing around to it.

##### a_skill trap
Looks like this trap does a skill check when triggered.

``Quality`` appears to be the skill number to use.

``Owner`` appears to be the target skill value needed to suceed.

##### a_special effects trap
Performs a special effect in the game world.

``Quality`` controls what effect is played.
| ``Quality`` | Effect         |
| ----------- | -------------- |
| 1           | Unknown        |
| 2           | Guardian Laugh |
| 3           | Unknown        |
| 4           | Earthquake*    |
| 5           | Red Flash      |
| 6           | Black Flash    |
| 7           | Orange Flash   |
| 8           | Black Flash    |

* Owner controls how long the earthquake lasts


##### a_spelltrap
Casts a spell given by the ``owner`` and ``quality`` values

Spell Number is ``((quality & 0xf) << 4) | (owner & 0xf)``

* Given that cutscenes are spells this is used in some places to play cutscences when a trigger is activated.

##### a_teleport trap
Teleports the player to another tile and/or level

``Quality`` gives destination tile X
``Owner`` gives destination tile Y
``zpos`` If 0 then destination is on the same level, if not 0 then ``zpos`` is the target level to go to.

* It is currently unknown how the arrival ``zpos`` coordinate is set when moving between levels.
 
##### a_text string trap
Displays a string of text in the message scroll. The text will always be from string block 9.

In ``UW1``, the string number is given by ``(64 * dungeon_level) + owner``

In ``UW2``, the string number is given by ``(32 * quality + owner)``

##### a_tym rune
An inworld trap rune that paralyses the player for a period.

TODO: Confirm paralyse time.

##### a_ward trap or a_tell trap
A special trap that is formed by the rune of warding spell.

When an NPC collides with the trap a text message will inform the player that a creature has collided with the trap at a relavitve position to the player.

A small amount of damage may also be applied to the creature based on the ``casting`` skill.

##### an_experience trap
A trap that will increase or decrease the experience points for the player.

The exp change here is based off a formula involving the owner and quality of the trap

```c#
ìnt q = quality << 3; // or quality * 8
int o = owner & 7; // gives a owner value range of 0-7
int x = o + q; 
x = x - 100;

int s = owner >> 3;
int y = 1 << s;

return x * y  // The range of possible values are -255 to + 255
```

A ``quality`` value of 31 or less means the result will always be negative which causes a negative ``experience`` change by that amount

See also  section on ``Leveling Up`` 

##### an_inventory trap
A trap that will check the player inventory for a specific item
The ``item id`` to find is ``("quality" << 5) | owner``

##### an_oscillator trap
A trap that raises and lowers a row of tiles in an oscilating pattern.

Based on current understanding
``X`` is the current direction of oscillation
``owner`` is the max floor height to reach.
``Y`` or ``zpos``(likely) is possibly the min height for the oscillation 

#### Triggers
##### a_close trigger
A trigger that fires when a door is closed

##### a_look trigger
A trigger that fires when a look based action. Eg looking at a texture map occurs.

##### a_move trigger
A trigger that fires when the avatar is moving within a tile

##### a_pick up trigger
A trigger that fires when an object is picked up. The trigger will be the ``link`` object or part of a containers contents.

##### a_pressure release trigger
An in-world trigger that fires when enough weight is removed from a pressure plate to raise it up.

##### a_pressure trigger
An in-world trigger that fires when sufficent weight is added to a pressure plate to depress it.

##### a_scheduled trigger
A trigger that is evaluated on level entry as part of ``*SCD.ARK*`` processing.

##### a_step on trigger
Unknown but possibly this means the floor of a tile is being stepped on. 

##### a_timer trigger
A trigger that fires at regular intervals. Timing appears to be based on ``zpos`` seconds intervals. Timer triggers only process when the player is in the area of the trigger.

##### a_use trigger
A trigger that fires when an object (eg a switch) is used.

##### an_enter trigger
A trigger that fires when a player enters a tile.

##### an_exit trigger
A trigger that fires when a player exits a tile.

##### an_open trigger
A trigger that fires when a door is opened.

##### an_unlock trigger
A trigger that fires when a door is unlocked.

##### a_step on trigger
``UW1`` only. Not sure if it is used ut I believe it fires when a tile floor is stepped on.

## Quests
### ``UW1`` Quests
| Quest No | Quest                                                  | Notes                                       |
| -------- | ------------------------------------------------------ | ------------------------------------------- |
| 0        | Dr. Owl's assistant Murgo freed                        |                                             |
| 1        | talked to Hagbard                                      |                                             |
| 2        | Met Dr. Owl?                                           |                                             |
| 3        | permission to speak to king Ketchaval                  |                                             |
| 4        | Goldthirst's quest to kill the gazer (1: gazer killed) |                                             |
| 5        | Garamon, find talismans and throw into lava            |                                             |
| 6        | friend of Lizardman folk                               |                                             |
| 7        | ?? (conv #24, Murgo)                                   |                                             |
| 8        | book from Bronus for Morlock                           |                                             |
| 9        | "find Gurstang" quest                                  |                                             |
| 10       | where to find Zak, for Delanrey                        |                                             |
| 11       | Rodrick killed                                         |                                             |
| 32       | status of "Knight of the Crux" quest                   |                                             |
|          | Stage 0                                                | no knight                                   |
|          | Stage 1                                                | seek out Dorna Ironfist                     |
|          | Stage 2                                                | started quest to search the "writ of Lorne" |
|          | Stage 3                                                | found writ                                  |
|          | Stage 4                                                | door to armoury opened                      |
| 36       | No of talismans still to destroy.                      |                                             |
| 37       | Garamon dream stages                                   |                                             |




### ``UW2`` Quests

| Quest No    | Description                                                                                             |
| ----------- | ------------------------------------------------------------------------------------------------------- |
| 0           | ``Prison Tower`` related - The troll is released                                                        |
| 1           | ``Prison Tower`` related - Bishop is free?                                                              |
| 2           | ``Prison Tower`` related - Borne wants you to   kill bishop                                             |
| 3           | ``Prison Tower`` related - Bishop is dead                                                               |
| 6           | Helena asks you to speak to   praetor loth                                                              |
| 7           | Loth is dead                                                                                            |
| 8           | Kintara tells you about Javra                                                                           |
| 9           | Lobar tells you about the   "virtues"                                                                   |
| 10          | ``Prison Tower`` related                                                                                |
| 11          | Listener under the castle is dead.                                                                      |
| 12          | used in ``Ice Caverns`` to say the   avatar can banish the guardians presence. Wand of altara?          |
| 13          | Mystral wants you to spy on altara                                                                      |
| 14          | Likely all lines of power have   been cut.                                                              |
| 15          | Altara tells you about the   listener                                                                   |
| 18          | You learn that the Trikili can   talk.                                                                  |
| 19          | You know Relk has found the black   jewel (josie tells you)                                             |
| 20          | You've met Mokpo                                                                                        |
| 22          | Blog is now your friend(?)                                                                              |
| 23          | You have used Blog to defeat   dorstag                                                                  |
| 24          | You have won a duel in the arena                                                                        |
| 25          | You have defeated Zaria in the   pits                                                                   |
| 26          | You know about the magic scepter   (for the Zoranthus)                                                  |
| 27          | You know about the sigil of   binding/got the djinn bottle(by bringing the scepter to zorantus)         |
| 28          | Took Krilner as a slave                                                                                 |
| 29          | You know Dorstag has the gem(?)                                                                         |
| 30          | Dorstag refused your challenge(?)                                                                       |
| 32          | Met a Talorid                                                                                           |
| 33          | You have agreed to help the   talorid (historian)                                                       |
| 34          | Met or heard of Eloemosynathor                                                                          |
| 35          | The vortz are attacking!                                                                                |
| 36          | Quest to clarify question for Data   Integrator                                                         |
| 37          | ``Talorus`` related (checked by   futurian)                                                             |
| 38          | ``Talorus`` related *bliy scup is   regenerated                                                         |
| 39          | ``Talorus`` related                                                                                     |
| 40          | Dialogian has helped with data   integrator                                                             |
| 43          | Patterson has gone postal                                                                               |
| 45          | Janar has been met and befriended                                                                       |
| 47          | You have recieve the quest from   the triliki                                                           |
| 48          | You have dreamed about the void                                                                         |
| 49          | Bishop tells you about the gem.                                                                         |
| 50          | The keep is going to crash.                                                                             |
| 51          | You have visited the ice caves   (``Brittania`` becomes icy)                                            |
| 52          | Have you cut the line of power in   the ``Ice Caverns``                                                 |
| 54          | Checked by Mors Gotha? related to   keep crashing                                                       |
| 55          | Banner of ``Killorn`` returned (based   on *SCD.ARK* research)                                          |
| 58          | Set when meeting bishop. Bishop   tells you about altara                                                |
| 60          | Possible ``Prison Tower`` variable.   used in check trap on second highest level                        |
| 61          | You've brought water to Josie                                                                           |
| 63          | Blog has given you the gem                                                                              |
| 64          | Is mors dead                                                                                            |
| 65          | Pits related (checked by dorstag)                                                                       |
| 68          | You have given the answers to   nystrul and the invasion (endgame) has begun.                           |
| 104         | Set when you enter scintilus level   5 (set by variable trap)                                           |
| 105         | Set when the air daemon is   absorbed. (see also xclock1 and xclock3 changes)                           |
| 106         | Got or read mors spellbook                                                                              |
| 107         | Set after freeing praetor loth and   you/others now know about the horn.                                |
| 109         | Set to 1 after first LB   conversation. All castle occupants check this on first talk.                  |
| 110         | Checked when talking to LB and   Dupre. The guardians forces are attacking                              |
| 112         | checked when talking to LB. You   have been fighting with the others                                    |
| 114         | checked when talking to LB. The   servants are restless                                                 |
| 115         | checked when talking to LB. The   servants are on strike                                                |
| 116         | The strike has been called off.                                                                         |
| 117         | Mors has been defeated in ``Killorn``                                                                   |
| 118         | The wisps tell you about the   trilikisssss2                                                            |
| 119         | Fizzit the thief surrenders                                                                             |
| 120         | checked by miranda?                                                                                     |
| 121         | You have defeated Dorstag                                                                               |
| 122         | You have killed the bly scup   ductosnore                                                               |
| 123         | Relk is dead                                                                                            |
| 124 &   126 | are referenced in teleport_trap                                                                         |
| 128         | 0-128 bit field of where the lines   of power have been broken.                                         |
| 129         | How many enemies killed in the   pits (also xclock 14)                                                  |
| 131         | You are told that you are in the   ``Prison Tower`` =1                                                  |
| 132         | Set to 2 during Kintara   conversation                                                                  |
| 133         | How much Jospur owes you for   fighting in the pits                                                     |
| 134         | The password for the ``Prison Tower``   (random value)                                                  |
| 135         | Checked by goblin in sewers  (no of worms killed on level. At more than   8 they give you fish)         |
| 143         | Set to 33 after first LB   conversation. Set to 3 during endgame (value-1 is the cutscene to play at conversation end, set back to  after cutscene has played) When set at endgame run the endgame sequence |


#### The X Clock
In ``UW2`` there are 15 special game variables called X Clocks. These are special incrementing variables that track progress  throughout the game.

The currently identified x clocks and their values are are 
```
1=Miranda conversations & related events in the castle
  1 - Nystrul is curious about exploration.Set after entering lvl 1 from the route downwards. (set variable traps 17 may be related)
  2 - After you visited another world.  (variable 17 is set to 16), dupre is tempted
  3 - servants getting restless
  4 - concerned about water, dupre is annoyed by patterson
  5 - Dupre is bored / dupre is fetching water
  6 - UNKNOWN
  7 - Miranda wants to talk to you pre tori murder
  8 - tori is murdered
  9 - Charles finds a key
  11 - Go see Nelson (before he is murdered by Patterson)
  12 - Patterson kills Nelson
  13 - Patterson is dead
  14 - Gem is weak/Mors is in ``Killorn``(?)
  15 - Nystrul wants to see you again re endgame
  16 - Nystrul questions have been answered Mars Gotha comes
2=Nystrul conversations and no of blackrock gems treated
3=Djinn Capture
  2 = balisk oil is in the mud
  3 = player bathed in oily mud
  4 = baked in lava
  5 = iron flesh cast (does not need to be still on when you break the bottle)
  6 = djinn captured in body
14=Tracks number of enemies killed in the ``Pits Of Carnage``
15=Used in multiple convos. Possibly tells the game to process a change when updated??

```

## Game worlds and Levels
### ``UW1`` Levels

#### ``Tybal's Lair``
TODO: Why no magic

#### The ``Ethereal Void`` Endgame Map

### ``UW2`` Levels
#### ``Britannia``
Magic spells at level 3 or higher are hard coded to fail when cast in ``Britannia``

#### ``Pits Of Carnage``
TODO: Write up how the arena works.

#### The ``Ethereal Void``

##### QBert Puzzle.
TODO Document this puzzle in full. It is very complex

## NPCS
### NPC Basics

NPCs are a form of mobile object. The format of their mobile object data is different from that of the projectile type mobile objects and includes information for pathing, behaviours and additional NPC specific attributes such as flagging the NPC as powerful.

### AI Goals and Goal Targets
NPCS AI actions are controlled by a number of values. The ``Goal`` and the ``GTarg`` (Goal Target) are the most often used. The ``GTarg`` refers to an object list index number and is normaly either 0 (no target) or 1 (target the player). However it is possible for the target to be another NPC.

To target a tile (eg as a move destination) the HomeX or TargetX and HomeY or TargetY (TODO naming) values give the tile the NPC is to move to. The home tiles being where the NPC "hangs out" and the target tiles being where the NPC will accomplish their current goal from.

TODO List goals

### Special Death Cases
Some NPCs have special logic for when they die. Normally for setting quest flags. The ``WhoAmI`` value is normally used here

| Game       | WhoAmI       | NPC Details              |  Notes                                                                                                                         |
|------------|--------------|--------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| ``UW1``    |              |  Gazer in the mines      | The relevant quest flag is set                                                                                                 |
| ``UW1``    |              |  Rodric                  | The relevant quest flag is set                                                                                                 |
| ``UW2``    |              |  Pit Warriors            | When these NPCs die the win-loss record is updated for the pits                                                                |
| ``UW2``    |              |  Mors Gothri             | Mors dies twice. The first time she escapes and the spell book is available. Second time triggers her death conversation       | 
| ``UW2``    |              |  Demon Guard             | When this NPC dies the first time they will transform into a demon with full health.                                           | 
| ``UW2``    |              |  Relk                    | TODO                                                                                                                           | 
| ``UW2``    |              |  Fissif                  | Initiates a special dying conversation , awards 30 exp                                                                         | 
| ``UW2``    |              |  The Listener            | If this NPC is killed by any weapon (last hit only) other than the jewelled dagger it will have it's health restored to full. On death set the relevant quest flag   | 


### ``UW2`` Castle Schedule

The Castle schedule in ``UW2`` is hard coded (for the most part) and is based on factors like progression in the plot (see ``xclock`` 1) and scheduled triggers for some events where a NPC needs to be moved to a specific location. Eg the castle murders.

## Strings
### Decoding

### String Blocks

## Conversations
### Conversation Machine Code Specification

### Imported Functions

### Conversation Variables

## Unanswered Questions and Problems

* SCD.ARK is still not fully understood
* Recompressing UW2 lev.ark files
* How Garamon's dreams are sequenced in ``UW1``

## Code Examples


## Reverse Engineering

## Trivia

Here is some "fun" discoveries
* Equiping the shield of very great toughness (link=717) in the primary hand allows the player to cast the on hit Unlocking spell in ``UW2`` when punching a door. Presumably other shield types or objects could cast other spells but no other instances of this bug have been discovered yet...
* Throwing objects at buttons can trigger them at a distance.